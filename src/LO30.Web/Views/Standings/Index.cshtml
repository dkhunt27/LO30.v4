@model List<TeamStandingViewModel>

@{
    ViewData["Title"] = "Standings";
}

<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>Standings</h2>
    <ol class="breadcrumb">
      <li>
        <a href="@Url.Action("Home", "Index")">Home</a>
      </li>
      <li class="active">
        <strong>Standings</strong>
      </li>
    </ol>
  </div>
  <div class="col-lg-2">

  </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>@ViewData["SeasonName"] @ViewData["SeasonType"]</h5>
        </div>
        <div class="ibox-content">
          <div>
            <table class="table table-striped table-bordered table-hover dataTables-standings" width="100%">
              <thead>
                <tr>
                  <th class="text-left all">Rank</th>
                  <th class="text-left all showMobile">Team</th>
                  <th class="text-left min-mobile-l">Games</th>
                  <th class="text-left min-tablet-p">Wins</th>
                  <th class="text-left min-tablet-p">Losses</th>
                  <th class="text-left min-tablet-p">Ties</th>
                  <th class="text-left all">Points</th>
                  <th class="text-left min-tablet-l">GF</th>
                  <th class="text-left min-tablet-l">GA</th>
                  <th class="text-left min-tablet-l">PIM</th>
                  <th class="text-left min-desktop">W%</th>
                  <th class="text-left min-desktop">Subs</th>
                </tr>
              </thead>
              @*<tbody>
                @foreach (var item in Model)
                {
                <tr>
                  <td class="text-left">@item.Ranking</td>
                  <td class="text-left"><a ng-href="/ng/#/teams/{{item.teamId}}/seasons/{{item.seasonId}}">@item.TeamCode</a></td>
                  <td class="text-left"><a ng-href="/ng/#/teams/{{item.teamId}}/seasons/{{item.seasonId}}">@item.TeamNameShort</a></td>
                  <td class="text-left"><a ng-href="/ng/#/teams/{{item.teamId}}/seasons/{{item.seasonId}}">@item.TeamNameLong</a></td>
                  <td class="text-right">@item.Games</td>
                  <td class="text-right">@item.Wins</td>
                  <td class="text-right">@item.Losses</td>
                  <td class="text-right">@item.Ties</td>
                  <td class="text-right">@item.Points</td>
                  <td class="text-right">@item.GoalsFor</td>
                  <td class="text-right">@item.GoalsAgainst</td>
                  <td class="text-right">@item.PenaltyMinutes</td>
                  <td class="text-right">@String.Format("{0:P1}", item.WinPercent)</td>
                  <td class="text-right">@item.Subs</td>
                </tr>
                }
              </tbody>*@
              <tfoot>
                <tr>
                  <th class="text-left">Rank</th>
                  <th class="text-left">Team</th>
                  <th class="text-left">Games</th>
                  <th class="text-left">Wins</th>
                  <th class="text-left">Losses</th>
                  <th class="text-left">Ties</th>
                  <th class="text-left">Points</th>
                  <th class="text-left">GF</th>
                  <th class="text-left">GA</th>
                  <th class="text-left">PIM</th>
                  <th class="text-left">W%</th>
                  <th class="text-left">Subs</th>
                </tr>
              </tfoot>
            </table>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

@section Styles {
  <environment names="Development,Staging,Production">
    <link rel="stylesheet" href="~/lib/datatables.net-bs/css/dataTables.bootstrap.min.css" />
    <link rel="stylesheet" href="~/lib/datatables.net-buttons-bs/css/buttons.bootstrap.min.css" />
    <link rel="stylesheet" href="~/lib/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" />
  </environment>
}


@section Scripts {
  <environment names="Development,Staging,Production">
    <script src="~/lib/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/lib/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script src="~/lib/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="~/lib/datatables.net-buttons-bs/js/buttons.bootstrap.min.js"></script>
    <script src="~/lib/pdfmake/build/pdfmake.min.js"></script>
    <script src="~/lib/pdfmake/build/vfs_fonts.js"></script>
    <script src="~/lib/jszip/dist/jszip.js"></script>
    <script src="~/lib/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="~/lib/datatables.net-buttons/js/buttons.colVis.min.js"></script>
    <script src="~/lib/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/lib/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
  </environment>

  <script type="text/javascript">
    $(document).ready(function () {



      var seasonId = "@ViewData["SeasonId"]";
      var playoffs = "@ViewData["Playoffs"]";

      var width = $(window).width();

      var table = $('.dataTables-standings').DataTable({
        // dom: '<"html5buttons"B>lTfgitp',
        "dom": "<'row'<'col-sm-4'l><'col-sm-4'f><'col-sm-4'<'html5buttons'B>>><'row'<'col-sm-12'rt>><'row'<'col-sm-5'i><'col-sm-7'p>>",
        "buttons": [
          "colvis", "copyHtml5", "excelHtml5", { extend: 'pdfHtml5', orientation: 'landscape', pageSize: 'letter' }
        ],
        "paging": false,
        "order": [[0, "asc"]],
        "info": false,
        "responsive": true,
        "columns": [
          { "data": "ranking" },
          {
            "data": "teamNameToDisplay",
            "render": function (data, type, row) {
              var result = row.teamNameLong;
              if (width <= 800) {
                result = row.teamCode;
              } else if (width <= 1200) {
                result = row.teamNameShort;
              }
              return result;
            }
          },
          { "data": "games" },
          { "data": "wins" },
          { "data": "losses" },
          { "data": "ties" },
          { "data": "points" },
          { "data": "goalsFor" },
          { "data": "goalsAgainst" },
          { "data": "penaltyMinutes" },
          {
            "data": "winPercent",
            "render": function (data, type, row) {
              return Math.round(data * 100) + "%";
            }
          },
          { "data": "subs" },
          {
            "data": "teamCode",
            "visible": false
          },
          {
            "data": "teamNameShort",
            "visible": false
          },
          {
            "data": "teamNameLong",
            "visible": false
          }
        ],
        "ajax": {
          "url": "api/standings/seasons/" + seasonId + "/playoffs/" + playoffs,
          "type": "GET",
          "dataSrc": ""
        }
      });
    });
  </script>
}