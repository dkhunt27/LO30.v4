"use strict";angular.module("lo30NgApp").directive("sideNavigation",function(e){return{restrict:"A",link:function(a,t){a.$watch("authentication.user",function(){e(function(){t.metisMenu()})})}}}).directive("minimalizaSidebar",function(e){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:function(a){a.minimalize=function(){angular.element("body").toggleClass("mini-navbar"),!angular.element("body").hasClass("mini-navbar")||angular.element("body").hasClass("body-small")?(angular.element("#side-menu").hide(),e(function(){angular.element("#side-menu").fadeIn(400)},200)):angular.element("#side-menu").removeAttr("style")}}}}).directive("pageTitle",function(e){return{restrict:"E",template:"<h4>{{pageTitle}}abc</h4>",link:function(a,t,o){a.$watch("stateData",function(e){a.pageTitle=e.pageTitle},!0),a.stateData=e.current.data}}}),function(){angular.module("lo30NgApp",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","pageslide-directive","matchMedia","datatables","datatables.bootstrap","datatables.buttons","datatables.columnfilter","frapontillo.bootstrap-switch","btford.markdown"])}(),function(){function e(e,a){e.state("root",{"abstract":!0,url:"/r",templateUrl:"js/components/common/root.html"}).state("root.standings",{url:"/standings/seasons/:seasonId/seasontypes/:seasonTypeId",templateUrl:"js/standings/standings.html",controller:"standingsController",controllerAs:"vm",data:{pageTitle:"Standings"}}).state("root.standings2",{url:"/standings",templateUrl:"js/standings/standings.html",controller:"standingsController",controllerAs:"vm",data:{pageTitle:"Standings"}}).state("root.stats",{url:"/stats/playertypes/:playerType/seasons/:seasonId/seasontypes/:seasonTypeId",templateUrl:"js/statsPlayers/statsPlayers.html",controller:"statsPlayersController",controllerAs:"vm",data:{pageTitle:"Stats"}}).state("root.stats2",{url:"/stats/playertypes/:playerType",templateUrl:"js/statsPlayers/statsPlayers.html",controller:"statsPlayersController",controllerAs:"vm",data:{pageTitle:"Stats"}}).state("root.profilesPlayers",{url:"/profiles/players/:playerId/playertypes/:playerType/seasons/:seasonId/seasontypes/:seasonTypeId?tab",templateUrl:"js/profilesPlayers/profilesPlayers.html",controller:"profilesPlayersController",controllerAs:"vm",data:{pageTitle:"Player Profiles"}}).state("root.profilesPlayers2",{url:"/profiles/players/:playerId/playertypes/:playerType?tab",templateUrl:"js/profilesPlayers/profilesPlayers.html",controller:"profilesPlayersController",controllerAs:"vm",data:{pageTitle:"Player Profiles"}}).state("root.profilesTeams",{url:"/profiles/teams/:teamId/seasons/:seasonId?tab",templateUrl:"js/profilesTeams/profilesTeams.html",controller:"profilesTeamsController",controllerAs:"vm",data:{pageTitle:"Team Profiles"}}).state("root.profilesTeams2",{url:"/profiles/teams/:teamId?tab",templateUrl:"js/profilesTeams/profilesTeams.html",controller:"profilesTeamsController",controllerAs:"vm",data:{pageTitle:"Team Profiles"}}).state("root.careers",{url:"/careers/playertypes/:playerType",templateUrl:"js/careers/careers.html",controller:"careersController",controllerAs:"vm",data:{pageTitle:"Careers"}}).state("root.gameBoxScore",{url:"/gameBoxScore/games/:gameId/seasons/:seasonId",templateUrl:"js/gameBoxScore/gameBoxScore.html",controller:"gameBoxScoreController",controllerAs:"vm",data:{pageTitle:"Game Box Score"}}).state("root.news",{url:"/news",templateUrl:"js/news/news.html",controller:"newsController",controllerAs:"vm",data:{pageTitle:"News"}}).state("root.schedule",{url:"/schedule",templateUrl:"js/schedule/schedule.html",controller:"scheduleController",controllerAs:"vm",data:{pageTitle:"Schedule"}}),a.otherwise("/r/news")}angular.module("lo30NgApp").config(e),angular.module("lo30NgApp").config(["$urlRouterProvider",function(e){e.deferIntercept()}])}(),function(){angular.module("lo30NgApp").constant("constScheduleTeamFeedBaseUrl","localhost:49419").config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|webcal):/)}]).run(["$rootScope","$urlRouter","$location","$state",function(e,a,t,o){e.$on("$locationChangeSuccess",function(e,t,s){e.preventDefault(),("main.exampleState"!==o.current.name||"http://some.url"===t||"https://another.url"!==s)&&a.sync()}),a.listen()}])}(),$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var a=$("nav.navbar-default").height(),t=$("#page-wrapper").height();a>t&&$("#page-wrapper").css("min-height",a+"px"),t>a&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(a>t?$("#page-wrapper").css("min-height",a-60+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),$(window).scroll(function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")}),setTimeout(function(){e()})}),$(function(){$(window).bind("load resize",function(){$(document).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),angular.module("lo30NgApp").controller("careersController",function(e,a,t,o,s,n,r,l,i,c,m,p,u,y){var d,f=(c._,c.sjv,this),h={},S=function(e){f.dtOptions=p.newOptions(),f.dtColumns="skater"===e?[u.newColumn("rank").withTitle("Rank"),u.newColumn("playerNameToDisplay").withTitle("Player").renderWith(function(e,a,t,o){return'<a href="/#/r/profiles/players/'+t.playerId+'/playertypes/skater?tab=career">'+e+"</a>"}),u.newColumn("seasons").withTitle("Seasons"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")]:[u.newColumn("rank").withTitle("Rank"),u.newColumn("playerNameToDisplay").withTitle("Player").renderWith(function(e,a,t,o){return'<a href="/#/r/profiles/players/'+t.playerId+'/playertypes/goalie?tab=career">'+e+"</a>"}),u.newColumn("seasons").withTitle("Seasons"),u.newColumn("games").withTitle("Games"),u.newColumn("wins").withTitle("Wins"),u.newColumn("winPercent").withTitle("W%").renderWith(function(e,a,t,o){return Math.round(100*e)+"%"}),u.newColumn("goalsAgainst").withTitle("GA"),u.newColumn("goalsAgainstAverage").withTitle("GAA").renderWith(function(e,a,t,o){return e.toFixed(2)}),u.newColumn("shutouts").withTitle("Shutouts")],f.dtInstance={}},g=function(e){var a=6;"goalie"===e&&(a=4),f.dtOptions=p.fromFnPromise(function(){return h.promise}).withOption("processing",!0).withOption("paging",!0).withOption("bFilter",!1).withOption("bInfo",!0).withOption("page-length",10).withOption("responsive",!0).withOption("searching",!0).withOption("order",[[a,"desc"]]).withOption("scrollX",!0).withPaginationType("full_numbers").withDisplayLength(10).withBootstrap().withButtons(["colvis","copyHtml5","excelHtml5",{extend:"pdfHtml5",orientation:"landscape",pageSize:"letter"}]).withDOM("<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'html5buttons'B>>><'row'<'col-sm-12'rt>><'row'<'col-sm-12'p>>")},T=function(e){f.dataLoaded=!1;var a=[],t="playerStatCareers";"goalie"===e&&(t="goalieStatCareers"),l[t].list().then(function(e){a=N(e)})["finally"](function(){h.resolve(a),f.dataLoaded=!0})},N=function(e){var a=e.map(function(e,a){return e.rank=a+1,i.is("xs, sm")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):i.is("md")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},w=function(e){T(e)};a.removeSearch=function(){a.searchText=null,d.search("").draw()},a.performSearch=function(){var e=a.searchText?a.searchText:"";d.search(e).draw()};var v=function(){a.$watch(function(){return t.params.playerType},function(e){f.playerType=e}),a.$watch("searchText",function(e,t){e!==t&&a.performSearch(e)}),a.$watch(function(){return f.dtInstance},function(e,a){e!==a&&e.DataTable&&(d=e.DataTable,d.on("order.dt search.dt",function(){d.column(0,{search:"applied",order:"applied"}).nodes().each(function(e,a){e.innerHTML=a+1})}).draw())})};f.$onInit=function(){f.dataLoaded=!1,h=s.defer(),f.playerType=t.params.playerType,f.playerTypeTitle="Skater","goalie"===f.playerType&&(f.playerTypeTitle="Goalie"),S(f.playerType),o(function(){v(),g(f.playerType),w(f.playerType)},100)}}),angular.module("lo30NgApp").filter("filterize",function(e){var a=function(a){var t=[],o=a.split(",");return angular.forEach(o,function(a){var o=a.split(":");if(0!==o.length&&o[1]){var s,n=o[0].replace(/(^\s+|\s+$)/g,""),r=o[1].toLowerCase();switch(n.toLowerCase()){case"rank":s="ranking";break;case"team":s=e.is("xs, sm")?"teamCode":"teamNameShort";break;case"player":s="player";break;case"pos":case"position":s="position";break;case"line":s="line";break;case"sub":s="sub"}t.push({key:s,value:r})}else t.push({key:"TEXTONLY",value:o})}),t};return function(e,t){if(!t)return e;var o=a(t),s=[];return angular.forEach(e,function(e){var a=[];angular.forEach(o,function(t){if("TEXTONLY"===t.key)-1!==JSON.stringify(e).toLowerCase().indexOf(t.value)&&a.push(e);else{var o=e[t.key];o&&("string"!=typeof o&&(o=JSON.stringify(o)),-1!==o.toLowerCase().indexOf(t.value)&&a.push(e))}}),a.length===o.length&&s.push(e)}),s}}),angular.module("lo30NgApp").filter("percentage",["$filter",function(e){return function(a,t){return e("number")(100*a,t)+"%"}}]),angular.module("lo30NgApp").controller("gameBoxScoreController",function(e,a,t,o,s){var n=(t._,this);n.$onInit=function(){e.local={selectedGameId:3480,selectedGame:{},selectedSeasonId:56};var t=o.seasons.get();n.seasonId=t.seasonId;var s=o.seasonTypes.get();n.seasonTypeId=s.seasonTypeId,e.local.selectedGameId=parseInt(a.params.gameId,10)}}),angular.module("lo30NgApp").controller("newsController",function(e,a){var t=this,o="<h3>2016-2017 Registration</h3>";o+="It's that time of year to begin the registration process for this fall<br/>",o+="Please read the Registration Cover Letter, complete the Registration Form, and mail it with your check to league (address info on the form) by July 1st, 2016.<br/>";var s="<h3>Board Members</h3>";s+="Your 2015-2017 Board Members are:<br/>",s+="<br/>",s+="<h4><b>President:</b> Steve Crandall</h4>",s+="<br/>",s+="<h4>Pete Howard -- Hunt's Ace</h4>",s+="<h4>Gary Cutsy -- DPKZ</h4>",s+="<h4>Bob Toaso -- Bill Brown</h4>",s+="<h4>Tony Zaschak -- Zaschak</h4>",s+="<h4>Greg Panaretos -- LAB/PSI</h4>",s+="<h4>Nick Niemiec -- Glover</h4>",s+="<h4>Scott Green -- D&G</h4>",s+="<h4>Jim Weak -- Villanova</h4>",s+="<br/>",s+="<h5>Mike Hermann (Volunteer Treasurer)</h5>",s+="<h5>Dan Hunt (Volunteer Secretary/Web Admin)</h5>";var n="<h3>Season Opener 9/8 </h3>";s+="<br/>",n+="<h4>Rink A 8:30	Hunt's Ace vs Villanova</h4>",n+="<h4>Rink B 9:00	DPKZ vs LAB/PSI</h4>",n+="<h4>Rink A 9:30	Bill Brown vs Glover</h4>",n+="<h4>Rink B 10:00	D&G vs Zas Ent</h4>";var r="<h3>Socks</h3>";r+="The sox we have used the last two seasons belong to the League. When you pack your bag this week, plz include any sox you might have from last year or the year before. If you are on the same team, those are your sox this year. If you are on a different team, give those sox to your Board Member -- he will get them back to where they belong.<br/>",t.news=[{"class":"chat-message right",image:"img/board/steve.png",author:"Steve Crandall",date:"Mon Sept 5 2016",content:a.trustAsHtml(r)},{"class":"chat-message left",image:"img/board/dan.png",author:"Dan Hunt",date:"Sun Sept 4 2016",content:a.trustAsHtml(n)},{"class":"chat-message right",image:"img/board/dan.png",author:"Dan Hunt",date:"Mon Aug 22 2016",content:a.trustAsHtml(s)},{"class":"chat-message left",image:"img/board/mike.png",author:"Mike Hermann",date:"Wed Jun 1 2016",content:a.trustAsHtml(o)}],t.$onInit=function(){}}),lo30NgApp.controller("careersController",function(e,a,t,o,s,n,r,l,i,c){var m=r._;e.initializeScopeVariables=function(){e.local={screenSizeIsDesktop:!1,screenSizeIsTablet:!1,screenSizeIsMobile:!1,selectedPlayerType:"skater",playerStatCareers:[],playerStatCareersToDisplay:[],fetchPlayerStatCareersCompleted:!1,searchText:null,criteriaSeasonId:-1,criteriaSeasonTypeId:-1}},e.resetSort=function(e){},e.addNewSearchToSearch=function(a){e.local.searchText=e.local.searchText+a},e.removeExistingSearchFromSearch=function(a){e.local.searchText=e.local.searchText.replace(", "+a,""),e.local.searchText=e.local.searchText.replace(a+", ",""),e.local.searchText=e.local.searchText.replace(a,"")},e.prepSearchForNewSearch=function(){e.local.searchText=e.local.searchText?e.local.searchText+", ":""},e.sortAscOnly=function(a){e.sortOn=a,e.sortDirection=!1},e.sortDescOnly=function(a){e.sortOn=a,e.sortDirection=!0},e.sortAscFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!1)},e.sortDescFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!0)},e.sortClass=function(a,t){var o="";return e.sortOn===a&&(o=e.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),o},e.removeSearch=function(){e.local.searchText=null,e.local.selectedTeam=null,e.local.selectedPosition=null,e.local.selectedLine=null,e.local.selectedSub=null},e.fetchPlayerStatTeams=function(a,t){e.local.fetchPlayerStatCareersCompleted=!1,e.local.playerStatCareers=[];var o="playerStatCareers";"goalie"===e.local.selectedPlayerType&&(o="goalieStatCareers"),s[o].list().then(function(a){e.local.playerStatCareers=m.sortBy(a,function(e){return-1*e.points}),e.buildPlayerStatCareersToDisplay()})["finally"](function(){e.local.fetchPlayerStatCareersCompleted=!0})},e.buildPlayerStatCareersToDisplay=function(){e.local.playerStatCareersToDisplay=e.local.playerStatCareers.map(function(a,t){return a.rank=t+1,e.local.screenSizeIsMobile?(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):e.local.screenSizeIsTablet?(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)),a})},e.fetchData=function(){e.fetchPlayerStatTeams()},e.setWatches=function(){},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});c.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),e.local.screenSizeIsDesktop=n.is("lg"),e.local.screenSizeIsTablet=n.is("md"),e.local.screenSizeIsMobile=n.is("xs, sm"),t.playerType&&(e.local.selectedPlayerType=t.playerType),e.fetchData(),o(function(){"skater"===e.local.selectedPlayerType?e.sortDescFirst("points"):e.sortAscFirst("goalsAgainstAverage")},0)},e.activate()}),angular.module("lo30NgApp").factory("criteriaServiceOLD",function(e,a,t,o,s){var n,r,l,i=o._,c={season:{},seasonType:{},game:{},gameLastProcessed:{}},m={season:"not set",seasonType:"not set",game:"not set"},p=function(){return e.debug("criteriaService.fetchSeasons()"),n=[],t.seasons.listForSeasonsWithGameSelection().then(function(e){if(n=e,c.season.isNotSet()){var a=i.find(n,function(e){return e.isCurrentSeason===!0});return c.season.set(a)}return c.season.get()})},u=function(a,t){e.debug("criteriaService.fetchSeasonTypes()  for seasonId:"+t+" for gamePlayoffs: "+a),l=[{seasonTypeId:0,seasonTypeName:"Regular Season"},{seasonTypeId:1,seasonTypeName:"Playoffs"}];var o;return a?(o=i.find(l,function(e){return"Playoffs"===e.seasonTypeName}),c.seasonType.set(o)):(o=i.find(l,function(e){return"Regular Season"===e.seasonTypeName}),c.seasonType.set(o))},y=function(a){return e.debug("criteriaService.fetchGames() for seasonId:"+a),r=[],t.games.listForSeasonId(a).then(function(e){return r=e,t.dataProcessing.getLastGameProcessedForSeasonId(a)}).then(function(e){var a=i.find(r,function(a){return a.gameId===e.gameId});return c.game.set(a)})};return c.initialize=function(){return a(function(t,o){var n=[];c.season.isNotSet()?n.push(p()):(e.debug("criteriaService.initialize() season already set"),s.emitEvent(s.events().seasonSet)),c.game.isNotSet()||(e.debug("criteriaService.initialize() game already set"),s.emitEvent(s.events().gameSet)),c.seasonType.isNotSet()||(e.debug("criteriaService.initialize() seasonType already set"),s.emitEvent(s.events().seasonTypeSet)),a.all(n)["finally"](function(e){return t(e)},function(a){return e.error("Error while trying to criteriaService.initialize()",a),o(a)})})},c.season={isNotSet:function(){return"not set"===m.season?!0:!1},get:function(){return m.season},set:function(e){return a(function(a){return m.season!==e?(m.season=e,s.emitEvent(s.events().seasonSet),y(e.seasonId).then(function(){return a(m.season)})):a(m.season)})},setById:function(e){return a(function(a){if(m.season.seasonId!==e){var t=i.find(n,function(a){return a.seasonId===e});return c.season.set(t)}return a(m.season)})},data:function(){return n?n.reverse():n}},c.seasonType={isNotSet:function(){return"not set"===m.seasonType?!0:!1},get:function(){return m.seasonType},set:function(e){return a(function(a){return m.seasonType!==e&&(m.seasonType=e,s.emitEvent(s.events().seasonTypeSet)),a(m.seasonType)})},data:function(){return l}},c.game={isNotSet:function(){return"not set"===m.game?!0:!1},get:function(){return m.game},set:function(e){return a(function(a){return m.game!==e?(m.game=e,s.emitEvent(s.events().gameSet),u(e.playoffs,e.seasonId).then(function(){return a(m.game)})):a(m.game)})},setById:function(e){return a(function(a){if(m.game.gameId!==e){var t=i.find(r,function(a){return a.gameId===e});return c.game.set(t)}return a(m.game)})},data:function(){return r?r.reverse():r}},c}),lo30NgApp.filter("filterize",function(e){var a=function(a){var t=[],o=a.split(",");return angular.forEach(o,function(a){var o=a.split(":");if(0!==o.length&&o[1]){var s,n=o[0].replace(/(^\s+|\s+$)/g,""),r=o[1].toLowerCase();switch(n.toLowerCase()){case"rank":s="ranking";break;case"team":s=e.is("xs, sm")?"teamCode":"teamNameShort";break;case"player":s="player";break;case"pos":case"position":s="position";break;case"line":s="line";break;case"sub":s="sub"}t.push({key:s,value:r})}else t.push({key:"TEXTONLY",value:o})}),t};return function(e,t){if(!t)return e;var o=a(t),s=[];return angular.forEach(e,function(e){var a=[];angular.forEach(o,function(t){if("TEXTONLY"===t.key)-1!==JSON.stringify(e).toLowerCase().indexOf(t.value)&&a.push(e);else{var o=e[t.key];o&&("string"!=typeof o&&(o=JSON.stringify(o)),-1!==o.toLowerCase().indexOf(t.value)&&a.push(e))}}),a.length===o.length&&s.push(e)}),s}}),lo30NgApp.controller("galleryTeamsController",function(e,a,t,o,s,n,r,l,i,c,m,p){a.Lightbox=i;l._;a.initializeScopeVariables=function(){a.local={teams:[],fetchTeamsCompleted:!1,criteriaSeasonId:-1,criteriaSeasonTypeId:-1},a.images=[]},a.fetchTeams=function(e){a.local.fetchTeamsCompleted=!1,a.local.teams=[],n.teams.listForSeasonId(e).then(function(e){a.local.teams=e,a.buildImages()})["finally"](function(){a.local.fetchTeamsCompleted=!0})};var u=function(e){var a=e.replace(/ /g,"");return a=a.replace(/&/g,""),a=a.replace(/\//g,""),a=a.replace(/\./g,""),a=a.replace(/'/g,"")};a.buildImages=function(){a.images=a.local.teams.map(function(e){var a,t=u(e.seasonName),o=u(e.teamNameLong),s="img/teams/"+t+"/"+o+".png",n="img/teams/"+t+"/"+o+"_tn.png",l={url:s,thumbUrl:n};return a=r.is("xs, sm")?e.teamCode:r.is("md")?e.teamNameShort:e.teamNameLong,l.caption=e.seasonName+" "+a,l.thumbCaption=a,l}),e.debug("images",a.images)},a.openLightboxModal=function(e){i.openModal(a.images,e)},a.setWatches=function(){a.$on(m.events().seasonSet,function(){a.fetchData()}),a.$on(m.events().seasonTypeSet,function(){a.fetchData()})},a.setReturnUrlForCriteriaSelector=function(){var e=t.href(t.current.name,t.params,{absolute:!1});p.set(e)},a.activate=function(){a.initializeScopeVariables(),a.setWatches(),a.setReturnUrlForCriteriaSelector(),a.local.criteriaSeasonId=parseInt($routeParams.seasonId,10),a.local.criteriaSeasonTypeId=parseInt($routeParams.seasonTypeId,10),a.fetchTeams(a.local.selectedSeasonId)},a.activate()}),lo30NgApp.controller("gameBoxScoreController",function(e,a,t,o,s,n){t._;e.initializeScopeVariables=function(){e.local={selectedGameId:3480,selectedSeasonId:56}},e.setWatches=function(){},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});n.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),a.params.gameId&&(e.local.selectedGameId=parseInt(a.params.gameId,10))},e.activate()}),lo30NgApp.controller("loginModalController",function(e,a){this.cancel=e.$dismiss,this.submit=function(t,o){a.login(t,o).then(function(a){e.$close(a)})}}),lo30NgApp.controller("playersController",function(e,a,t,o,s,n,r,l,i){var c=n._;e.initializeScopeVariables=function(){e.local={selectedPlayerId:593,selectedSeasonId:56,selectedPlayerType:"skater",playerStatGames:[],playerStatTeams:[],playerStatSeasons:[],playerStatCareer:{},playerStatGamesToDisplay:[],playerStatTeamsToDisplay:[],playerStatSeasonsToDisplay:[],playerStatCareerToDisplay:[],fetchplayerStatGamesCompleted:!1,fetchPlayerStatTeamsCompleted:!1,fetchplayerStatSeasonsCompleted:!1,fetchplayerStatCareerCompleted:!1,tabActiveIndex:-1,tabStates:{career:0,season:1,profile:2}}},e.sortAscOnly=function(a){e.sortOn=a,e.sortDirection=!1},e.sortDescOnly=function(a){e.sortOn=a,e.sortDirection=!0},e.sortAscFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!1)},e.sortDescFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!0)},e.sortClass=function(a,t){var o="";return e.sortOn===a&&(o=e.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),o},e.fetchPlayerStatCareer=function(a,t){e.local.fetchplayerStatCareerCompleted=!1,e.local.playerStatCareer={};var s="playerStatCareers";"goalie"===t&&(s="goalieStatCareers"),o[s].getForPlayerId(a).then(function(a){e.local.playerStatCareer=a,e.buildPlayerStatCareerToDisplay()})["finally"](function(){e.local.fetchplayerStatCareerCompleted=!0})},e.fetchPlayerStatSeasons=function(a,t){e.local.fetchPlayerStatSeasonsCompleted=!1,e.local.playerStatSeasons=[];var s="playerStatSeasons";"goalie"===t&&(s="goalieStatSeasons"),o[s].listForPlayerId(a).then(function(a){e.local.playerStatSeasons=c.sortBy(a,function(e){return e.seasonName}),e.buildPlayerStatSeasonsToDisplay()})["finally"](function(){e.local.fetchPlayerStatSeasonsCompleted=!0})},e.fetchPlayerStatTeams=function(a,t,s){e.local.fetchPlayerStatTeamsCompleted=!1,e.local.playerStatTeams=[];var n="playerStatTeams";"goalie"===s&&(n="goalieStatTeams"),o[n].listForPlayerIdSeasonId(a,t).then(function(a){e.local.playerStatTeams=c.sortBy(a,function(e){return e.sub}),e.buildPlayerStatTeamsToDisplay()})["finally"](function(){e.local.fetchPlayerStatTeamsCompleted=!0})},e.fetchPlayerStatGames=function(a,t,s){e.local.fetchPlayerStatGamesCompleted=!1,e.local.playerStatGames=[];var n="playerStatGames";"goalie"===s&&(n="goalieStatGames"),o[n].listForPlayerIdSeasonId(a,t).then(function(a){e.local.playerStatGames=c.sortBy(a,function(e){return-1*e.gameId}),e.buildPlayerStatGamesToDisplay()})["finally"](function(){e.local.fetchPlayerStatGamesCompleted=!0})},e.buildPlayerStatCareerToDisplay=function(){e.local.playerStatCareerToDisplay=e.local.playerStatCareer;var a=e.local.playerStatCareerToDisplay;s.is("xs, sm")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):s.is("md")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix))},e.buildPlayerStatSeasonsToDisplay=function(){e.local.playerStatSeasonsToDisplay=e.local.playerStatSeasons.map(function(e,a){return e.rank=a+1,s.is("xs, sm")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):s.is("md")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e})},e.buildPlayerStatTeamsToDisplay=function(){e.local.playerStatTeamsToDisplay=e.local.playerStatTeams.map(function(e,a){return e.rank=a+1,s.is("xs, sm")?(e.teamNameToDisplay=e.teamNameCode,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):s.is("md")?(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e})},e.buildPlayerStatGamesToDisplay=function(){e.local.playerStatGamesToDisplay=e.local.playerStatGames.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=s.is("xs, sm")?e.teamNameCode:s.is("md")?e.teamNameShort:e.teamNameShort,e})},e.fetchData=function(){{var t=r.seasonId.get();r.seasonTypeId.get()}switch(e.local.tabActiveIndex){case e.local.tabStates.career:e.fetchPlayerStatCareer(e.local.selectedPlayerId,e.local.selectedPlayerType),e.fetchPlayerStatSeasons(e.local.selectedPlayerId,e.local.selectedPlayerType),a.params.tab="career";break;case e.local.tabStates.season:e.fetchPlayerStatTeams(e.local.selectedPlayerId,t,e.local.selectedPlayerType),e.fetchPlayerStatGames(e.local.selectedPlayerId,t,e.local.selectedPlayerType),a.params.tab="season";break;default:$log.debug("tabActiveIndex not mapped for: ",newVal)}},e.setWatches=function(){e.$watch("local.tabActiveIndex",function(a,t){a>-1&&a!==t&&e.fetchData()}),e.$on(l.events().seasonSet,function(){e.fetchData()}),e.$on(l.events().seasonTypeSet,function(){e.fetchData()})},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});i.set(e)},e.activate=function(){e.initializeScopeVariables(),e.local.tabActiveIndex=-1,e.setWatches(),e.setReturnUrlForCriteriaSelector(),a.params.playerId&&(e.local.selectedPlayerId=parseInt(a.params.playerId,10)),a.params.playerType&&(e.local.selectedPlayerType=a.params.playerType),a.params.tab?t(function(){e.local.tabActiveIndex=e.local.tabStates[a.params.tab]},100):t(function(){e.local.tabActiveIndex=e.local.tabStates.season},100)},e.activate()}),angular.module("lo30NgApp").factory("returnUrlService",function(e,a){var t={};return t.set=function(e){var t={apiDataType:"returnUrl.set",urlPartial:"returnurl",method:"POST",params:{returnUrl:e}};return a.execute(t)},t}),lo30NgApp.controller("rootController",function(e,a,t,o,s,n,r,l){r._;e.initializeScopeVariables=function(){e.local={screenSizeIsDesktop:!1,screenSizeIsTablet:!1,screenSizeIsMobile:!1,sidebarIsCollapsed:!1,showNavSideBar:!0}},e.setWatches=function(){},e.setNavToSideMenu=function(){s[0].querySelector("#contentWrapper")},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});l.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),e.local.screenSizeIsDesktop=n.is("lg"),e.local.screenSizeIsTablet=n.is("md"),e.local.screenSizeIsMobile=n.is("xs, sm"),e.local.screenSizeIsMobile?(e.local.sidebarIsCollapsed=!0,e.local.showNavSideBar=!1):e.local.screenSizeIsTablet?(e.local.sidebarIsCollapsed=!0,e.local.showNavSideBar=!1):(e.local.sidebarIsCollapsed=!1,e.local.showNavSideBar=!1)},e.activate()}),lo30NgApp.controller("standingsController",function(e,a,t,o,s,n,r,l,i,c){a.initializeScopeVariables=function(){a.local={teamStandings:[],teamStandingsByDiv:[],teamStandingsToDisplay:[],fetchTeamStandingsCompleted:!1,criteriaSeasonId:-1,criteriaSeasonTypeId:-1}},a.sortAscOnly=function(e){a.sortOn=e,a.sortDirection=!1},a.sortDescOnly=function(e){a.sortOn=e,a.sortDirection=!0},a.sortAscFirst=function(e){a.sortOn===e?a.sortDirection=!a.sortDirection:(a.sortOn=e,a.sortDirection=!1)},a.sortDescFirst=function(e){a.sortOn===e?a.sortDirection=!a.sortDirection:(a.sortOn=e,a.sortDirection=!0)},a.sortClass=function(e,t){var o="";return a.sortOn===e&&(o=a.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),o},a.fetchTeamStandings=function(e,t){a.local.fetchTeamStandingsCompleted=!1,a.local.teamStandings=[],a.local.teamStandingsByDiv=[],n.teamStandings.listForSeasonIdSeasonTypeId(e,t).then(function(e){a.local.teamStandings=e,a.buildTeamStandingsToDisplay(a.local.teamStandings),a.parseTeamStandingsIntoDivisions(a.local.teamStandingsToDisplay)})["finally"](function(){a.local.fetchTeamStandingsCompleted=!0})},a.parseTeamStandingsIntoDivisions=function(t){var o=_.pluck(t,"divisionLongName"),s=_.uniq(o);s.forEach(function(e){var o=_.filter(t,function(a){return a.divisionLongName===e});a.local.teamStandingsByDiv.push({division:e,teamStandings:o})}),e.debug("teamStandingsByDiv",a.local.teamStandingsByDiv)},a.buildTeamStandingsToDisplay=function(t){a.local.teamStandingsToDisplay=t.map(function(e){return e.teamNameToDisplay=r.is("xs, sm")?e.teamCode:r.is("md")?e.teamNameShort:e.teamNameLong,e}),e.debug("teamStandingsToDisplay",a.local.teamStandingsToDisplay)},a.fetchData=function(){var e=l.seasonId.get(),t=l.seasonTypeId.get();a.fetchTeamStandings(e,t)},a.setWatches=function(){a.$on(i.events().seasonSet,function(){a.fetchData()}),a.$on(i.events().seasonTypeSet,function(){a.fetchData()})},a.setReturnUrlForCriteriaSelector=function(){var e=o.href(o.current.name,o.params,{absolute:!1});c.set(e)},a.activate=function(){a.initializeScopeVariables(),a.setWatches(),a.setReturnUrlForCriteriaSelector(),a.fetchData(),t(function(){a.sortAscFirst("ranking")},0)},a.activate()}),lo30NgApp.controller("statsPlayersController",function(e,a,t,o,s,n,r,l,i,c){var m=r._;e.initializeScopeVariables=function(){e.positions=["F","D","G"],e.subs=["With","Without"],e.lines=["1","2","3"],e.local={screenSizeIsDesktop:!1,screenSizeIsTablet:!1,screenSizeIsMobile:!1,selectedPlayerType:"skater",playerStatTeams:[],playerStatTeamsToDisplay:[],teams:[],fetchPlayerStatTeamsCompleted:!1,fetchTeamsCompleted:!1,searchText:null,selectedTeam:null,selectedPosition:null,selectedLine:null,selectedSub:null,criteriaSeasonId:-1,criteriaSeasonTypeId:-1}},e.filterByTeam=function(a){var t;t=e.local.screenSizeIsMobile?a.teamCode:e.local.screenSizeIsTablet?a.teamNameShort:a.teamNameShort;var o="team:"+e.local.selectedTeam,s="team:"+t;e.local.selectedTeam&&e.removeExistingSearchFromSearch(o),e.local.selectedTeam===t?e.local.selectedTeam=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(s),e.local.selectedTeam=t)},e.filterBySub=function(a){var t="sub:"+e.filterBySubMapper(e.local.selectedSub),o="sub:"+e.filterBySubMapper(a);e.local.selectedSub&&e.removeExistingSearchFromSearch(t),e.local.selectedSub===a?e.local.selectedSub=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(o),e.local.selectedSub=a),e.resetSort()},e.filterBySubMapper=function(e){
var a;switch(e){case"With":a="Y";break;case"Without":a="N";break;default:a=e}return a},e.filterByLine=function(a){var t="line:"+e.local.selectedLine,o="line:"+a;e.local.selectedLine&&e.removeExistingSearchFromSearch(t),e.local.selectedLine===a?e.local.selectedLine=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(o),e.local.selectedLine=a),e.resetSort()},e.filterByPosition=function(a){var t="pos:"+e.local.selectedPosition,o="pos:"+a;e.local.selectedPosition&&e.removeExistingSearchFromSearch(t),e.local.selectedPosition===a?e.local.selectedPosition=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(o),e.local.selectedPosition=a),e.resetSort()},e.resetSort=function(e){},e.addNewSearchToSearch=function(a){e.local.searchText=e.local.searchText+a},e.removeExistingSearchFromSearch=function(a){e.local.searchText=e.local.searchText.replace(", "+a,""),e.local.searchText=e.local.searchText.replace(a+", ",""),e.local.searchText=e.local.searchText.replace(a,"")},e.prepSearchForNewSearch=function(){e.local.searchText=e.local.searchText?e.local.searchText+", ":""},e.sortAscOnly=function(a){e.sortOn=a,e.sortDirection=!1},e.sortDescOnly=function(a){e.sortOn=a,e.sortDirection=!0},e.sortAscFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!1)},e.sortDescFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!0)},e.sortClass=function(a,t){var o="";return e.sortOn===a&&(o=e.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),o},e.removeSearch=function(){e.local.searchText=null,e.local.selectedTeam=null,e.local.selectedPosition=null,e.local.selectedLine=null,e.local.selectedSub=null},e.fetchPlayerStatTeams=function(a,t){e.local.fetchPlayerStatTeamsCompleted=!1,e.local.playerStatTeams=[];var o="playerStatTeams";"goalie"===e.local.selectedPlayerType&&(o="goalieStatTeams"),s[o].listForSeasonIdSeasonTypeId(a,t).then(function(a){e.local.playerStatTeams=m.sortBy(a,function(e){return-1*e.points}),e.buildPlayerStatTeamsToDisplay()})["finally"](function(){e.local.fetchPlayerStatTeamsCompleted=!0})},e.buildPlayerStatTeamsToDisplay=function(){e.local.playerStatTeamsToDisplay=e.local.playerStatTeams.map(function(a,t){return a.sub=a.sub?"Y":"N",a.rank=t+1,e.local.screenSizeIsMobile?(a.teamNameToDisplay=a.teamCode,a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):e.local.screenSizeIsTablet?(a.teamNameToDisplay=a.teamNameShort,a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.teamNameToDisplay=a.teamNameShort,a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)),a})},e.fetchTeams=function(a){e.local.fetchTeamsCompleted=!1,e.local.teams=[],s.teams.listForSeasonId(a).then(function(a){e.local.teams=a,angular.forEach(a,function(a,t){e.buildTeamsToDisplay()})})["finally"](function(){e.local.fetchScoreSheetEntryGoalsCompleted=!0})},e.buildTeamsToDisplay=function(){e.local.teamsToDisplay=e.local.teams.map(function(a,t){return a.rank=t+1,a.teamNameToDisplay=e.local.screenSizeIsMobile?a.teamCode:e.local.screenSizeIsTablet?a.teamNameShort:a.teamNameShort,a})},e.fetchData=function(){var a=l.seasonId.get(),t=l.seasonTypeId.get();e.fetchTeams(a),e.fetchPlayerStatTeams(a,t)},e.setWatches=function(){e.$on(i.events().seasonSet,function(){e.fetchData()}),e.$on(i.events().seasonTypeSet,function(){e.fetchData()})},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});c.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),e.local.screenSizeIsDesktop=n.is("lg"),e.local.screenSizeIsTablet=n.is("md"),e.local.screenSizeIsMobile=n.is("xs, sm"),t.playerType&&(e.local.selectedPlayerType=t.playerType),e.fetchData(),o(function(){"skater"===e.local.selectedPlayerType?e.sortDescFirst("points"):e.sortAscFirst("goalsAgainstAverage"),e.filterBySub("Without")},0)},e.activate()}),lo30NgApp.controller("teamsController",function(e,a,t,o,s,n,r,l,i,c,m){var p=r._;a.initializeScopeVariables=function(){a.local={selectedTeamId:318,selectedTeam:"not set",teamStandings:[],teamStandingsToDisplay:[],games:[],gamesToDisplay:[],gamesToDisplayCompleted:[],gamesToDisplayUpcoming:[],teamFeed:{},fetchTeamStandingsCompleted:!1,fetchGamesCompleted:!1,tabActiveIndex:-1,tabStates:{completed:0,upcoming:1,schedule:2}}},a.fetchTeamStandings=function(e,t){a.local.fetchTeamStandingsCompleted=!1,a.local.teamStandings=[],s.teamStandings.listForSeasonIdTeamId(e,t).then(function(e){a.local.teamStandings=e,a.buildTeamStandingsToDisplay(),a.buildTeamFeed()})["finally"](function(){a.local.fetchTeamStandingsCompleted=!0})},a.buildTeamStandingsToDisplay=function(){a.local.teamStandingsToDisplay=a.local.teamStandings.map(function(e){return a.selectedTeamName=e.teamNameLong,e.teamNameToDisplay=n.is("xs, sm")?e.teamCode:n.is("md")?e.teamNameShort:e.teamNameLong,e}),e.debug("teamStandingsToDisplay",a.local.teamStandingsToDisplay)},a.buildTeamFeed=function(){var t=a.local.teamStandings[0],o=t.seasonId,s=t.teamId,n=t.teamNameLong.replace(/ /g,"").replace(/\//g,"").replace(/-/g,"").replace(/\./g,""),r=t.seasonName.replace(/ /g,"");a.local.teamFeed={teamCode:t.teamCode,teamNameLong:t.teamNameLong,teamNameShort:t.teamNameShort,teamFeedUrl:l+"/Schedule/TeamFeed/Seasons/"+o+"/Teams/"+s+"/LO30Schedule-"+n+"-"+r},e.debug("teamFeed",a.local.teamFeed)},a.fetchGames=function(e,t){a.local.fetchGamesCompleted=!1,a.local.games=[],s.games.listForSeasonIdTeamId(e,t).then(function(e){a.local.games=e,a.buildGamesToDisplay()})["finally"](function(){a.local.fetchGamesCompleted=!0})},a.buildGamesToDisplay=function(){a.local.gamesToDisplay=a.local.games.map(function(e,t){return e.outcomeToDisplay=e.outcomeAway,e.teamIdHome===a.local.selectedTeamId&&(e.outcomeToDisplay=e.outcomeHome),e.overridenAway&&(e.outcomeToDisplay=e.outcomeToDisplay+"*"),n.is("xs, sm")?(e.awayTeamToDisplay=e.teamCodeAway,e.homeTeamToDisplay=e.teamCodeHome):n.is("md")?(e.awayTeamToDisplay=e.teamNameShortAway,e.homeTeamToDisplay=e.teamNameShortHome):(e.awayTeamToDisplay=e.teamNameLongAway,e.homeTeamToDisplay=e.teamNameLongHome),e}),a.local.gamesToDisplayCompleted=p.filter(a.local.gamesToDisplay,function(e){return null!==e.outcomeHome}),a.local.gamesToDisplayCompleted=p.sortBy(a.local.gamesToDisplayCompleted,function(e){return-1*e.gameId}),a.local.gamesToDisplayUpcoming=p.filter(a.local.gamesToDisplay,function(e){return null===e.outcomeHome}),a.local.gamesToDisplayUpcoming=p.sortBy(a.local.gamesToDisplayUpcoming,function(e){return e.gameId})},a.fetchData=function(){{var e=i.seasonId.get();i.seasonTypeId.get()}t.params.teamId&&(a.local.selectedTeamId=parseInt(t.params.teamId,10)),a.fetchTeamStandings(e,a.local.selectedTeamId),a.fetchGames(e,a.local.selectedTeamId)},a.setWatches=function(){a.$on(c.events().seasonSet,function(){a.fetchData()}),a.$on(c.events().seasonTypeSet,function(){a.fetchData()})},a.setReturnUrlForCriteriaSelector=function(){var e=t.href(t.current.name,t.params,{absolute:!1});m.set(e)},a.activate=function(){a.initializeScopeVariables(),a.setReturnUrlForCriteriaSelector(),t.params.tab?o(function(){a.local.tabActiveIndex=a.local.tabStates[t.params.tab]},100):o(function(){a.local.tabActiveIndex=a.local.tabStates.completed},100),a.fetchData()},a.activate()}),angular.module("lo30NgApp").controller("profilesPlayersController",function(e,a,t,o,s,n,r,l,i,c,m,p,u,y){var d=c._,f=(c.sjv,c.moment),h=this,S={},g={career:0,season:1,profile:2},T=[!1,!1,!1],N=function(e){h.dtOptions={playerCareer:p.newOptions(),playerSeasons:p.newOptions(),playerTeams:p.newOptions(),playerGames:p.newOptions()},h.dtColumns="skater"===e?{playerCareer:[u.newColumn("playerNameToDisplay").withTitle("Player"),u.newColumn("seasons").withTitle("Seasons"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")],playerSeasons:[u.newColumn("seasonName").withTitle("Season"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")],playerTeams:[u.newColumn("playerNameToDisplay").withTitle("Player"),u.newColumn("teamNameToDisplay").withTitle("Team"),u.newColumn("playoffs").withTitle("Playoffs"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")],playerGames:[u.newColumn("gameId").withTitle("Game").renderWith(function(e,a,t,o){return'<a href="/#/r/gameBoxScore/games/'+e+"/seasons/"+t.seasonId+'">'+e+"</a>"}),u.newColumn("gameDateTime").withTitle("Date").renderWith(function(e,a,t,o){return f(e).format("MMM Do h:mm a")}),u.newColumn("teamCode").withTitle("Team"),u.newColumn("playoffs").withTitle("Playoffs"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")]}:{playerCareer:[u.newColumn("playerNameToDisplay").withTitle("Player"),u.newColumn("seasons").withTitle("Seasons"),u.newColumn("games").withTitle("Games"),u.newColumn("wins").withTitle("Wins"),u.newColumn("winPercent").withTitle("W%").renderWith(function(e,a,t,o){return Math.round(100*e)+"%"}),u.newColumn("goalsAgainst").withTitle("GA"),u.newColumn("goalsAgainstAverage").withTitle("GAA").renderWith(function(e,a,t,o){return e.toFixed(2)}),u.newColumn("shutouts").withTitle("Shutouts")],playerSeasons:[u.newColumn("seasonName").withTitle("Season"),u.newColumn("games").withTitle("Games"),u.newColumn("wins").withTitle("Wins"),u.newColumn("winPercent").withTitle("W%").renderWith(function(e,a,t,o){return Math.round(100*e)+"%"}),u.newColumn("goalsAgainst").withTitle("GA"),u.newColumn("goalsAgainstAverage").withTitle("GAA").renderWith(function(e,a,t,o){return e.toFixed(2)}),u.newColumn("shutouts").withTitle("Shutouts")],playerTeams:[u.newColumn("playerNameToDisplay").withTitle("Player"),u.newColumn("teamNameToDisplay").withTitle("Team"),u.newColumn("playoffs").withTitle("Playoffs"),u.newColumn("games").withTitle("Games"),u.newColumn("wins").withTitle("Wins"),u.newColumn("winPercent").withTitle("W%").renderWith(function(e,a,t,o){return Math.round(100*e)+"%"}),u.newColumn("goalsAgainst").withTitle("GA"),u.newColumn("goalsAgainstAverage").withTitle("GAA").renderWith(function(e,a,t,o){return e.toFixed(2)}),u.newColumn("shutouts").withTitle("Shutouts")],playerGames:[u.newColumn("gameId").withTitle("Game").renderWith(function(e,a,t,o){return'<a href="/#/r/gameBoxScore/games/'+e+"/seasons/"+t.seasonId+'">'+e+"</a>"}),u.newColumn("gameDateTime").withTitle("Date").renderWith(function(e,a,t,o){return f(e).format("MMM Do h:mm a")}),u.newColumn("teamCode").withTitle("Team"),u.newColumn("playoffs").withTitle("Playoffs"),u.newColumn("wins").withTitle("Win"),u.newColumn("goalsAgainst").withTitle("GA"),u.newColumn("shutouts").withTitle("Shutout")]},h.dtInstance={playerCareer:{},playerSeasons:{},playerTeams:{},playerGames:{}}},w=function(e){var a=p.fromFnPromise(function(){return S.career.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap(),t=p.fromFnPromise(function(){return S.seasons.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("order",[[3,"desc"]]).withOption("scrollX",!0).withBootstrap(),o=p.fromFnPromise(function(){return S.teams.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap(),s=p.fromFnPromise(function(){return S.games.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap();h.dtOptions={playerCareer:a,playerSeasons:t,playerTeams:o,playerGames:s}},v=function(e){var a=e;return h.playerTitle=a.playerFirstName+" "+a.playerLastName,i.is("xs, sm")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):i.is("md")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)),a},I=function(e){var a=e.map(function(e,a){return e.rank=a+1,i.is("xs, sm")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):i.is("md")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},D=function(e){var a=e.map(function(e,a){return e.rank=a+1,h.playerTitle=e.playerFirstName+" "+e.playerLastName,i.is("xs, sm")?(e.teamNameToDisplay=e.teamNameCode,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):i.is("md")?(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},C=function(e){var a=e.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=i.is("xs, sm")?e.teamNameCode:i.is("md")?e.teamNameShort:e.teamNameShort,e});return a},P=function(e,a){h.careerDataLoaded=!1,h.playerStatCareer={};var t="playerStatCareers";"goalie"===a&&(t="goalieStatCareers"),l[t].getForPlayerId(e).then(function(e){h.playerStatCareer=v(e)})["finally"](function(){var e=[];e.push(h.playerStatCareer),S.career.resolve(e),h.careerDataLoaded=!0})},b=function(e,a){h.seasonsDataLoaded=!1,h.playerStatSeasons=[];var t="playerStatSeasons";"goalie"===a&&(t="goalieStatSeasons"),l[t].listForPlayerId(e).then(function(e){h.playerStatSeasons=d.sortBy(e,function(e){return e.seasonName}),h.playerStatSeasons=I(h.playerStatSeasons)})["finally"](function(){S.seasons.resolve(h.playerStatSeasons),h.seasonsDataLoaded=!0})},x=function(e,a,t){h.teamsDataLoaded=!1,h.playerStatTeams=[];var o="playerStatTeams";"goalie"===t&&(o="goalieStatTeams"),l[o].listForPlayerIdSeasonId(e,a).then(function(e){h.playerStatTeams=d.sortBy(e,function(e){return e.sub}),h.playerStatTeams=D(h.playerStatTeams)})["finally"](function(){S.teams.resolve(h.playerStatTeams),h.teamsDataLoaded=!0})},G=function(e,a,t){h.gamesDataLoaded=!1,h.playerStatGames=[];var o="playerStatGames";"goalie"===t&&(o="goalieStatGames"),l[o].listForPlayerIdSeasonId(e,a).then(function(e){h.playerStatGames=d.sortBy(e,function(e){return-1*e.gameId}),h.playerStatGames=C(h.playerStatGames)})["finally"](function(){S.games.resolve(h.playerStatGames),h.gamesDataLoaded=!0})},F=function(o,s,n){switch(a.tabActiveIndex){case g.career:P(s,n),b(s,n),t.params.tab="career";break;case g.season:x(s,o,n),G(s,o,n),t.params.tab="season";break;default:e.debug("tabActiveIndex not mapped for: ",a.tabActiveIndex)}},A=function(){a.$on(m.events().seasonSet,function(){var e=r.seasons.get();h.seasonId=e.seasonId,F(h.seasonId,h.playerId,h.playerType)}),a.$watch("tabActiveIndex",function(e,a){e>-1&&e!==a&&(T[e]||(F(h.seasonId,h.playerId,h.playerType),T[e]=!0))}),a.$watch(function(){return t.params.playerType},function(e){h.playerType=e})};h.$onInit=function(){h.careerDataLoaded=!1,a.tabActiveIndex=-1,S={career:s.defer(),seasons:s.defer(),teams:s.defer(),games:s.defer()};var e=r.seasons.get();h.seasonId=e.seasonId,h.playerId=t.params.playerId,h.playerType=t.params.playerType,h.playerTypeTitle="Skater","goalie"===h.playerType&&(h.playerTypeTitle="Goalie"),t.params.tab?o(function(){a.tabActiveIndex=g[t.params.tab]},200):o(function(){a.tabActiveIndex=g.season},200),N(h.playerType),o(function(){A(),w(h.playerType)},100)}}),angular.module("lo30NgApp").controller("profilesTeamsController",function(e,a,t,o,s,n,r,l,i,c,m,p,u,y,d){var f=m._,h=(m.sjv,this),S={},g={completed:0,upcoming:1,schedule:2},T=[!1,!1,!1],N=function(e){var a="info";return"W"===e||"W*"===e?a="success":"T"===e||"T*"===e?a="warning":("L"===e||"L*"===e)&&(a="danger"),a},w=function(){h.dtOptions={teamStandings:u.newOptions(),gamesCompleted:u.newOptions(),gamesUpcoming:u.newOptions()},h.dtColumns={teamStandings:[y.newColumn("ranking").withTitle("Rank"),y.newColumn("teamNameToDisplay").withTitle("Team"),y.newColumn("games").withTitle("Games"),y.newColumn("wins").withTitle("Wins"),y.newColumn("losses").withTitle("Losses"),y.newColumn("ties").withTitle("Ties"),y.newColumn("points").withTitle("Points"),y.newColumn("goalsFor").withTitle("GF"),y.newColumn("goalsAgainst").withTitle("GA"),y.newColumn("penaltyMinutes").withTitle("PIM"),y.newColumn("winPercent").withTitle("W%").renderWith(function(e,a,t,o){return Math.round(100*e)+"%"}),y.newColumn("subs").withTitle("Subs")],gamesCompleted:[y.newColumn("gameId").withTitle("Game").renderWith(function(e,a,t,o){return'<a href="/#/r/gameBoxScore/games/'+e+"/seasons/"+t.seasonId+'">'+e+"</a>"}),y.newColumn("gameDateTime").withTitle("Date").renderWith(function(e,a,t,o){return moment(e).format("MMM Do h:mm a")}),y.newColumn("outcomeToDisplay").withTitle("Outcome").renderWith(function(e,a,t,o){var s=N(e);return"success"===s?'<b class="text-'+s+'">'+e+"</b>":'<span class="text-'+s+'">'+e+"</span>"}),y.newColumn("awayTeamToDisplay").withTitle("Away").notSortable().renderWith(function(e,a,t,o){var s="default",n="span";return t.teamIdAway===h.teamId&&(n="b",s=N(t.outcomeAway)),"<"+n+' class="label label-'+s+'">'+t.goalsForAway+"</"+n+">&nbsp;&nbsp;<"+n+' class="text-'+s+'">'+e+"</"+n+">"}),y.newColumn("homeTeamToDisplay").withTitle("").notSortable().renderWith(function(e,a,t,o){return"@"}),y.newColumn("homeTeamToDisplay").withTitle("Home").notSortable().renderWith(function(e,a,t,o){var s="default",n="span";return t.teamIdHome===h.teamId&&(n="b",s=N(t.outcomeHome)),"<"+n+' class="label label-'+s+'">'+t.goalsForHome+"</"+n+">&nbsp;&nbsp;<"+n+' class="text-'+s+'">'+e+"</"+n+">"})],gamesUpcoming:[y.newColumn("gameId").withTitle("Game").renderWith(function(e,a,t,o){return'<a href="#">'+e+"</a>"}),y.newColumn("gameDateTime").withTitle("Date"),y.newColumn("awayTeamToDisplay").withTitle("Away").notSortable().renderWith(function(e,a,t,o){return t.teamIdAway===h.teamId?"<b>"+e+"</b>":e}),y.newColumn("homeTeamToDisplay").withTitle("").notSortable().renderWith(function(e,a,t,o){return"@"}),y.newColumn("homeTeamToDisplay").withTitle("Home").notSortable().renderWith(function(e,a,t,o){return t.teamIdHome===h.teamId?"<b>"+e+"</b>":e})]},h.dtInstance={teamStandings:{},gamesCompleted:{},gamesUpcoming:{}}},v=function(){var e=u.fromFnPromise(function(){return S.teamStandings.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap(),t=u.fromFnPromise(function(){return S.gamesCompleted.promise}).withOption("createdRow",function(e,t,o){e.className="W"===t.outcomeToDisplay||"W*"===t.outcomeToDisplay?"info":"T"===t.outcomeToDisplay||"T*"===t.outcomeToDisplay?"warning":"L"===t.outcomeToDisplay||"L*"===t.outcomeToDisplay?"danger":"info",n(angular.element(e).contents())(a)}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap(),o=u.fromFnPromise(function(){return S.gamesUpcoming.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap();h.dtOptions={teamStandings:e,gamesCompleted:t,gamesUpcoming:o}},I=function(e){var t=e.map(function(e){return a.selectedTeamName=e.teamNameLong,e.teamNameToDisplay=c.is("xs, sm")?e.teamCode:c.is("md")?e.teamNameShort:e.teamNameLong,e});return t},D=function(e){var a=e[0],t=a.seasonId,o=a.teamId,s=a.teamNameLong.replace(/ /g,"").replace(/\//g,"").replace(/-/g,"").replace(/\./g,""),n=a.seasonName.replace(/ /g,""),l={teamCode:a.teamCode,teamNameLong:a.teamNameLong,teamNameShort:a.teamNameShort,teamFeedUrl:r+"/Schedule/TeamFeed/Seasons/"+t+"/Teams/"+o+"/LO30Schedule-"+s+"-"+n};return l},C=function(e,a){var t=e.map(function(e,t){return e.outcomeToDisplay=e.outcomeAway,e.teamIdHome===a&&(e.outcomeToDisplay=e.outcomeHome),e.overridenAway&&(e.outcomeToDisplay=e.outcomeToDisplay+"*"),c.is("xs, sm")?(e.awayTeamToDisplay=e.teamCodeAway,e.homeTeamToDisplay=e.teamCodeHome):c.is("md")?(e.awayTeamToDisplay=e.teamNameShortAway,e.homeTeamToDisplay=e.teamNameShortHome):(e.awayTeamToDisplay=e.teamNameLongAway,e.homeTeamToDisplay=e.teamNameLongHome),e});return t},P=function(e,a){h.teamStandingsDataLoaded=!1;var t=[],o=[];i.teamStandings.listForSeasonIdTeamId(e,a).then(function(e){t=I(e),o=D(t)})["finally"](function(){S.teamStandings.resolve(t),h.teamFeed=o,h.teamStandingsDataLoaded=!0})},b=function(a,t){h.gamesDataLoaded=!1;var o=[];i.games.listForSeasonIdTeamId(a,t).then(function(e){o=C(e,t)})["finally"](function(){var a=f.filter(o,function(e){return null!==e.outcomeHome});a=f.sortBy(a,function(e){return-1*e.gameId}),S.gamesCompleted.resolve(a),e.debug("gamesCompleted",a);var t=f.filter(o,function(e){return null===e.outcomeHome});t=f.sortBy(t,function(e){return e.gameId}),S.gamesUpcoming.resolve(t),e.debug("gamesUpcoming",t),h.gamesDataLoaded=!0})},x=function(e,a){P(e,a),b(e,a)},G=function(){a.$on(p.events().seasonSet,function(){var e=l.seasons.get();h.seasonId=e.seasonId,x(h.seasonId,h.teamId)}),a.$watch("tabActiveIndex",function(e,a){e>-1&&e!==a&&(T[e]||(x(h.seasonId,h.teamId),T[e]=!0))}),a.$watch(function(){return t.params.teamId},function(e){h.teamId=parseInt(e,10)})};h.$onInit=function(){h.teamStandingsDataLoaded=!1,h.gamesDataLoaded=!1,a.tabActiveIndex=-1,S={teamStandings:s.defer(),gamesCompleted:s.defer(),gamesUpcoming:s.defer(),teamFeed:s.defer()};var e=l.seasons.get();h.seasonId=e.seasonId,h.teamId=parseInt(t.params.teamId,10),o(function(){a.tabActiveIndex=t.params.tab?g[t.params.tab]:g.upcoming},200),w(),o(function(){G(),v()},100)}}),angular.module("lo30NgApp").controller("scheduleController",function(e,a,t,o,s,n,r,l,i,c,m,p){var u=(c._,c.sjv,this),y=function(e){var a=e.map(function(e,a){e.teamNameToDisplay=i.is("xs, sm")?e.teamCode:i.is("md")?e.teamNameShort:e.teamNameShort;var t=e.teamId,o=e.teamNameLong.replace(" ","").replace("/","").replace("-","").replace(".","").replace("&","").replace("'",""),s=e.seasonName.replace(" ",""),n={teamNameToDisplay:e.teamNameToDisplay,teamCode:e.teamCode,teamNameLong:e.teamNameLong,teamNameShort:e.teamNameShort,teamFeedUrl:p+"/Schedule/TeamFeed/Seasons/"+u.seasonId+"/Teams/"+t+"/LO30Schedule-"+o+"-"+s};return n});return a},d=function(e){l.teams.listForSeasonId(e).then(function(e){u.teamFeeds=y(e)})["finally"](function(){})},f=function(e,a){d(e)};u.$onInit=function(){var e=r.seasons.get();u.seasonId=e.seasonId;var a=r.seasonTypes.get();u.seasonTypeId=a.seasonTypeId,f(u.seasonId,u.seasonTypeId)}}),angular.module("lo30NgApp").controller("standingsController",function(e,a,t,o,s,n){var r=s._,l=(s.sjv,this),i={paging:!1,searching:!1,order:[[0,"asc"]],info:!1,scrollX:!0,columns:[{data:"ranking",title:"Rank",className:"text-left"},{data:"teamNameToDisplay",title:"Team",className:"text-left",render:function(e,a,t){var s=t.teamNameLong;return o.is("xs, sm")?s=t.teamCode:o.is("md")&&(s=t.teamNameShort),'<a href="/#/r/profiles/teams/'+t.teamId+"/seasons/"+t.seasonId+'?tab=completed">'+e+"</a>"}},{data:"games",title:"Games",className:"text-center"},{data:"wins",title:"Wins",className:"text-center"},{data:"losses",title:"Losses",className:"text-center"},{data:"ties",title:"Ties",className:"text-center"},{data:"points",title:"Points",className:"text-center"},{data:"goalsFor",title:"GF",className:"text-center"},{data:"goalsAgainst",title:"GA",className:"text-center"},{data:"penaltyMinutes",title:"PIM",className:"text-center"},{data:"winPercent",title:"W%",className:"text-center",render:function(e,a,t){return Math.round(100*e)+"%"}},{data:"subs",title:"Subs",className:"text-center"},{data:"teamId",visible:!1},{data:"teamCode",visible:!1},{data:"teamNameShort",visible:!1},{data:"teamNameLong",visible:!1}]},c=function(e,a){return l.teamStandings=[],t.teamStandings.listForSeasonIdSeasonTypeId(e,a).then(function(e){l.teamStandings=p(e),l.teamStandings=m(l.teamStandings)})["finally"](function(){l.dtOptions=[],l.teamStandings.forEach(function(e,a){l.dtOptions[a]=r.clone(i),l.dtOptions[a].data=l.teamStandings[a].teamStandings})})},m=function(e){var a=r.pluck(e,"divisionLongName"),t=r.uniq(a),o=[];return t.forEach(function(a){var t=r.filter(e,function(e){return e.divisionLongName===a});o.push({division:a,teamStandings:t})}),o},p=function(e){var a=e.map(function(e){return e.teamNameToDisplay=o.is("xs, sm")?e.teamCode:o.is("md")?e.teamNameShort:e.teamNameLong,e});return a},u=function(e,a){return c(e,a)},y=function(){e.$on(n.events().seasonSet,function(){var e=a.seasons.get();l.seasonId=e.seasonId,u(l.seasonId,l.seasonTypeId)}),e.$on(n.events().seasonTypeSet,function(){var e=a.seasonTypes.get();l.seasonTypeId=e.seasonTypeId,u(l.seasonId,l.seasonTypeId)})};l.$onInit=function(){var e=a.seasons.get();l.seasonId=e.seasonId;var t=a.seasonTypes.get();l.seasonTypeId=t.seasonTypeId,u(l.seasonId,l.seasonTypeId),y()}}),angular.module("lo30NgApp").factory("apiBaseService",function(e,a){var t="/api/",o={};return o.execute=function(o){var s=o.apiDataType,n=o.urlPartial,r=o.method,l=o.params,i=t+n,c={url:i,method:r};return"GET"===r?c.params=JSON.parse(JSON.stringify(l)):c.data=JSON.parse(JSON.stringify(l)),a(c).then(function(a){return e.debug(s,a),a.data})["catch"](function(a){throw e.error(s,a),a})},o}),angular.module("lo30NgApp").factory("apiService",function(e,a){var t=e._,o={dataProcessing:{},games:{},goalieStatCareers:{},goalieStatGames:{},goalieStatSeasons:{},goalieStatTeams:{},playerStatCareers:{},playerStatGames:{},playerStatSeasons:{},playerStatTeams:{},scoreSheetEntryProcessedGoals:{},scoreSheetEntryProcessedPenalties:{},seasons:{},teams:{},teamStandings:{}};return o.dataProcessing.getLastGameProcessedForSeasonId=function(e){var t={apiDataType:"dataProcessing.getLastGameProcessedForSeasonId",urlPartial:"dataprocessing/lastprocessedgameid/seasons/"+e,method:"GET",params:null};return a.execute(t)},o.games.getForGameId=function(e){var t={apiDataType:"games.getForGameId",urlPartial:"games/"+e,method:"GET",params:null};return a.execute(t)},o.games.listForSeasonIdTeamId=function(e,t){var o={apiDataType:"games.listForSeasonIdTeamId",urlPartial:"games/seasons/"+e+"/teams/"+t,method:"GET",params:null};return a.execute(o)},o.games.listForSeasonId=function(e){var t={apiDataType:"games.listForSeasonId",urlPartial:"games/seasons/"+e,method:"GET",params:null};return a.execute(t)},o.goalieStatCareers.list=function(e){var t={apiDataType:"goalieStatCareers.list",urlPartial:"goaliestatcareers",method:"GET",params:null};return a.execute(t)},o.goalieStatCareers.getForPlayerId=function(e){var t={apiDataType:"goalieStatCareers.getForPlayerId",urlPartial:"goaliestatcareers/players/"+e,method:"GET",params:null};return a.execute(t)},o.goalieStatSeasons.listForPlayerId=function(e){var t={apiDataType:"goalieStatSeasons.listForPlayerId",urlPartial:"goaliestatseasons/players/"+e,method:"GET",params:null};return a.execute(t)},o.goalieStatSeasons.listForPlayerIdSeasonId=function(e,t){var o={apiDataType:"goalieStatSeasons.listForPlayerId",urlPartial:"goaliestatseasons/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(o)},o.goalieStatTeams.listForSeasonIdSeasonTypeId=function(e,t){var o={apiDataType:"goalieStatTeams.listForSeasonIdSeasonTypeId",urlPartial:"goaliestatteams/seasons/"+e+"/seasonTypes/"+t,method:"GET",params:null};return a.execute(o)},o.goalieStatTeams.listForPlayerIdSeasonId=function(e,t){var o={apiDataType:"goalieStatTeams.listForSeasonIdPlayerId",urlPartial:"goaliestatteams/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(o)},o.goalieStatGames.listForGameId=function(e){var t={apiDataType:"goalieStatGames.listForGameId",urlPartial:"goaliestatgames/games/"+e,method:"GET",params:null};return a.execute(t)},o.goalieStatGames.listForPlayerIdSeasonId=function(e,t){var o={apiDataType:"goalieStatGames.listForSeasonIdPlayerId",urlPartial:"goaliestatgames/goalies/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(o)},o.playerStatCareers.list=function(){var e={apiDataType:"playerStatCareers.list",urlPartial:"playerstatcareers",method:"GET",params:null};return a.execute(e)},o.playerStatCareers.getForPlayerId=function(e){var t={apiDataType:"playerStatCareers.getForPlayerId",urlPartial:"playerstatcareers/players/"+e,method:"GET",params:null};return a.execute(t)},o.playerStatGames.listForPlayerIdSeasonId=function(e,t){var o={apiDataType:"playerStatGames.listForSeasonIdPlayerId",urlPartial:"playerstatgames/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(o)},o.playerStatSeasons.listForPlayerId=function(e){var t={apiDataType:"playerStatSeasons.listForPlayerId",urlPartial:"playerstatseasons/players/"+e,method:"GET",params:null};return a.execute(t)},o.playerStatSeasons.listForPlayerIdSeasonId=function(e,t){var o={apiDataType:"playerStatSeasons.listForPlayerId",urlPartial:"playerstatseasons/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(o)},o.playerStatTeams.listForSeasonIdSeasonTypeId=function(e,t){var o={apiDataType:"playerStatTeams.listForSeasonIdSeasonTypeId",urlPartial:"playerstatteams/seasons/"+e+"/seasonTypes/"+t+"?key=1",method:"GET",params:null};return a.execute(o)},o.playerStatTeams.filterListForSeasonIdSeasonTypeId=function(e,t,o){var s={apiDataType:"playerStatTeams.listForSeasonIdSeasonTypeId",urlPartial:"playerstatteams/seasons/"+e+"/seasonTypes/"+t+"?"+o,method:"GET",params:null};return a.execute(s)},o.playerStatTeams.listForPlayerIdSeasonId=function(e,t){var o={apiDataType:"playerStatTeams.listForSeasonIdPlayerId",urlPartial:"playerstatteams/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(o)},o.scoreSheetEntryProcessedGoals.listForGameId=function(e){var t={apiDataType:"scoreSheetEntryProcessedGoals.listForGameId",urlPartial:"scoresheetentries/processed/goals/games/"+e,method:"GET",params:null};return a.execute(t)},o.scoreSheetEntryProcessedPenalties.listForGameId=function(e){var t={apiDataType:"scoreSheetEntryProcessedPenalties.listForGameId",urlPartial:"scoresheetentries/processed/penalties/games/"+e,
method:"GET",params:null};return a.execute(t)},o.seasons.list=function(){var e={apiDataType:"seasons.list",urlPartial:"seasons",method:"GET",params:null};return a.execute(e).then(function(e){return t.reject(e,function(e){return-1===e.seasonId})})},o.seasons.listForSeasonsWithGameSelection=function(){var e={apiDataType:"seasons.list",urlPartial:"seasons",method:"GET",params:null};return a.execute(e).then(function(e){return t.filter(e,function(e){return e.seasonId>=43})})},o.teams.listForSeasonId=function(e){var t={apiDataType:"teams.listForSeasonId",urlPartial:"teams/seasons/"+e,method:"GET",params:null};return a.execute(t)},o.teamStandings.listForSeasonIdSeasonTypeId=function(e,t){var o={apiDataType:"teamStandings.listForSeasonIdSeasonTypeId",urlPartial:"teamstandings/seasons/"+e+"/seasonTypes/"+t,method:"GET",params:null};return a.execute(o)},o.teamStandings.listForSeasonIdTeamId=function(e,t){var o={apiDataType:"teamStandings.listForSeasonIdTeamId",urlPartial:"teamstandings/seasons/"+e+"/teams/"+t,method:"GET",params:null};return a.execute(o)},o}),angular.module("lo30NgApp").factory("broadcastService",["$log","$rootScope",function(e,a){var t={},o={seasonSet:"seasonSet",seasonTypeSet:"seasonTypeSet",gameSet:"gameSet"},s={seasonSet:0,seasonTypeSet:0,gameSet:0};return t.events=function(){return o},t.emittedEventsCount=function(e){return s[e]},t.emitEvent=function(t){o[t]?(e.debug("Broadcast service emitted event: "+t),a.$broadcast(t),s[t]=s[t]+1):e.error("emitEvent unknown event name: "+t,"broadcastService")},t}]),angular.module("lo30NgApp").factory("criteriaService",function(e,a,t,o){var s=t._,n=[{seasonId:56,seasonName:"2015 - 2016"},{seasonId:54,seasonName:"2014 - 2015"},{seasonId:53,seasonName:"2013 - 2014"},{seasonId:52,seasonName:"2012 - 2013"},{seasonId:51,seasonName:"2011 - 2012"},{seasonId:50,seasonName:"2010 - 2011"},{seasonId:49,seasonName:"2009 - 2010"},{seasonId:48,seasonName:"2008 - 2009"},{seasonId:47,seasonName:"2007 - 2008"},{seasonId:46,seasonName:"2006 - 2007"},{seasonId:45,seasonName:"2005 - 2006"},{seasonId:44,seasonName:"2004 - 2005"},{seasonId:43,seasonName:"2003 - 2004"},{seasonId:42,seasonName:"2002 - 2003"},{seasonId:41,seasonName:"2001 - 2002"},{seasonId:40,seasonName:"2000 - 2001"}],r=[{decadeId:4,decadeName:"2010-2019",seasons:[56,54,53,52,51,50]},{decadeId:3,decadeName:"2000-2009",seasons:[49,48,47,46,45,44,43,42,41,40]}],l=[{seasonTypeId:0,seasonTypeName:"Regular Season"},{seasonTypeId:1,seasonTypeName:"Playoffs"}],i=56,c=0,m=function(){return e.debug("criteriaService.fetchSeasons()"),n=[],apiService.seasons.listForSeasonsWithGameSelection().then(function(e){if(n=e,p.season.isNotSet()){var a=s.find(n,function(e){return e.isCurrentSeason===!0});return p.season.set(a)}return p.season.get()})},p={};return p.initialize=function(){return a(function(t,s){var n=[];p.season.isNotSet()?n.push(m()):(e.debug("criteriaService.initialize() season already set"),o.emitEvent(o.events().seasonSet)),p.game.isNotSet()||(e.debug("criteriaService.initialize() game already set"),o.emitEvent(o.events().gameSet)),p.seasonType.isNotSet()||(e.debug("criteriaService.initialize() seasonType already set"),o.emitEvent(o.events().seasonTypeSet)),a.all(n)["finally"](function(e){return t(e)},function(a){return e.error("Error while trying to criteriaService.initialize()",a),s(a)})})},p.decades={get:function(){return r.map(function(e){return e.hasSelectedSeason=!1,e.seasons=e.seasons.map(function(a){var t;return t="object"==typeof a?a:s.findWhere(n,{seasonId:a}),t.seasonId===i?(t.isSelectedSeason=!0,e.hasSelectedSeason=!0):t.isSelectedSeason=!1,t}),e})}},p.seasons={get:function(){return s.findWhere(n,{seasonId:i})},set:function(e){e.seasonId!==i&&(i=e.seasonId,o.emitEvent(o.events().seasonSet))},setById:function(e){e=parseInt(e,10),e!==i&&(i=parseInt(e,10),o.emitEvent(o.events().seasonSet))}},p.seasonTypes={get:function(){return s.findWhere(l,{seasonTypeId:c})},set:function(e){e.seasonTypeId!==c&&(c=e.seasonTypeId,o.emitEvent(o.events().seasonTypeSet))},setById:function(e){e=parseInt(e,10),e!==c&&(c=e,o.emitEvent(o.events().seasonTypeSet))}},p.games={get:function(){return s.findWhere(games,{gameId:selectedGameId})},set:function(e){e.gameId!==selectedGameId&&(selectedGameId=e.gameId,o.emitEvent(o.events().gameSet))},setById:function(e){e=parseInt(e,10),e!==selectedGameId&&(selectedGameId=parseInt(e,10),o.emitEvent(o.events().gameSet))}},p}),angular.module("lo30NgApp").factory("externalLibService",[function(){var e=_,a=sjv,t=moment;return{_:e,sjv:a,moment:t}}]),angular.module("lo30NgApp").controller("statsPlayersController",function(e,a,t,o,s,n,r,l,i,c,m,p,u){var y,d=(i._,i.sjv,this),f={},h={team:{skater:10,goalie:8},sub:{skater:13,goalie:9},position:{skater:11,goalie:-1},line:{skater:12,goalie:-1}},S=function(e){d.dtOptions=m.newOptions(),d.dtColumns="skater"===e?[p.newColumn("rank").withTitle("Rank"),p.newColumn("playerNameToDisplay").withTitle("Player").renderWith(function(e,a,t,o){return'<a href="/#/r/profiles/players/'+t.playerId+'/playertypes/skater?tab=season">'+e+"</a>"}),p.newColumn("games").withTitle("Games"),p.newColumn("goals").withTitle("Goals"),p.newColumn("assists").withTitle("Assists"),p.newColumn("points").withTitle("Points"),p.newColumn("penaltyMinutes").withTitle("PIM"),p.newColumn("powerPlayGoals").withTitle("PPG"),p.newColumn("shortHandedGoals").withTitle("SHG"),p.newColumn("gameWinningGoals").withTitle("GWG"),p.newColumn("teamNameToDisplay").withTitle("Team"),p.newColumn("position").withTitle("Position"),p.newColumn("line").withTitle("Line"),p.newColumn("sub").withTitle("Sub")]:[p.newColumn("rank").withTitle("Rank"),p.newColumn("playerNameToDisplay").withTitle("Player").renderWith(function(e,a,t,o){return'<a href="/#/r/profiles/players/'+t.playerId+'/playertypes/goalie?tab=season">'+e+"</a>"}),p.newColumn("games").withTitle("Games"),p.newColumn("wins").withTitle("Wins"),p.newColumn("winPercent").withTitle("W%").renderWith(function(e,a,t,o){return Math.round(100*e)+"%"}),p.newColumn("goalsAgainst").withTitle("GA"),p.newColumn("goalsAgainstAverage").withTitle("GAA").renderWith(function(e,a,t,o){return e.toFixed(2)}),p.newColumn("shutouts").withTitle("Shutouts"),p.newColumn("teamNameToDisplay").withTitle("Team"),p.newColumn("sub").withTitle("Sub")],d.dtInstance={}},g=function(){d.dtOptions=m.fromFnPromise(function(){return f.promise}).withOption("processing",!0).withOption("paging",!0).withOption("bFilter",!1).withOption("bInfo",!0).withOption("page-length",10).withOption("responsive",!0).withOption("searching",!0).withOption("order",[[5,"desc"]]).withOption("scrollX",!0).withPaginationType("full_numbers").withDisplayLength(10).withBootstrap().withButtons(["colvis","copyHtml5","excelHtml5",{extend:"pdfHtml5",orientation:"landscape",pageSize:"letter"}]).withDOM("<'row'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'<'html5buttons'B>>><'row'<'col-sm-12'rt>><'row'<'col-sm-12'p>>")},T=function(e){var a=e.map(function(e,a){return e.sub=e.sub?"Y":"N",e.rank=a+1,l.is("xs, sm")?(e.teamNameToDisplay=e.teamCode,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):l.is("md")?(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},N=function(e){var a=e.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=l.is("xs, sm")?e.teamCode:l.is("md")?e.teamNameShort:e.teamNameShort,e});return a},w=function(e,a,t){d.dataLoaded=!1;var o=[],s="playerStatTeams";"goalie"===t&&(s="goalieStatTeams"),r[s].listForSeasonIdSeasonTypeId(e,a).then(function(e){o=T(e)})["finally"](function(){f.resolve(o),d.dataLoaded=!0})},v=function(e){r.teams.listForSeasonId(e).then(function(e){d.teams=N(e)})["finally"](function(){})},I=function(e,a,t){v(e),w(e,a,t)};e.removeSearch=function(){e.searchText=null,y.search("").draw()},e.performSearch=function(){var a=e.searchText?e.searchText:"";y.search(a).draw()};var D=function(e,a){y.columns(e).search(a).draw()},C=function(e){y.columns(e).search("").draw()},P=function(e,a,t){return t&&C(e),a===t?t=null:(t=a,D(e,a)),t};e.filterByTeam=function(e){var a;a=l.is("xs, sm")?e.teamCode:l.is("md")?e.teamNameShort:e.teamNameShort;var t=h.team[d.playerType];d.selectedTeam=P(t,a,d.selectedTeam)};var b=function(e){var a;return a="With"===e?"Y":"Without"===e?"N":"Y"===e?"With":"N"===e?"Without":null};e.filterBySub=function(e){var a=b(e),t=b(d.selectedSub),o=h.sub[d.playerType];t=P(o,a,t),d.selectedSub=b(t)},e.filterByLine=function(e){var a=h.line[d.playerType];d.selectedLine=P(a,e,d.selectedLine)},e.filterByPosition=function(e){var a=h.position[d.playerType];d.selectedPosition=P(a,e,d.selectedPosition)};var x=function(){e.$on(c.events().seasonSet,function(){var e=n.seasons.get();d.seasonId=e.seasonId,I(d.seasonId,d.seasonTypeId,d.playerType)}),e.$on(c.events().seasonTypeSet,function(){var e=n.seasonTypes.get();d.seasonTypeId=e.seasonTypeId,I(d.seasonId,d.seasonTypeId,d.playerType)}),e.$watch(function(){return a.params.playerType},function(e){d.playerType=e}),e.$watch("searchText",function(a,t){a!==t&&e.performSearch(a)}),e.$watch(function(){return d.dtInstance},function(e,a){e!==a&&e.DataTable&&(y=e.DataTable,y.on("order.dt search.dt",function(){y.column(0,{search:"applied",order:"applied"}).nodes().each(function(e,a){e.innerHTML=a+1})}).draw())})};d.$onInit=function(){d.dataLoaded=!1,f=o.defer(),d.positions=["F","D","G"],d.subs=["With","Without"],d.lines=["1","2","3"],l.is("xs, sm")?d.screenSizeIsMobile=!0:l.is("md")&&(d.screenSizeIsMobile=!1);var e=n.seasons.get();d.seasonId=e.seasonId;var s=n.seasonTypes.get();d.seasonTypeId=s.seasonTypeId,d.playerType=a.params.playerType,S(d.playerType),t(function(){x(),g(d.playerType),I(d.seasonId,d.seasonTypeId,d.playerType)},100)}}),angular.module("lo30NgApp").component("contentComponent",{bindings:{},templateUrl:"js/components/content/content.html",controller:function(e,a,t,o,s){var n=this;n.pageTitle=o.current.data.pageTitle}}),angular.module("lo30NgApp").component("navigationComponent",{bindings:{},templateUrl:"js/components/navigation/navigation.html",controller:function(e,a,t){var o=this;o.activePage="notset",o.setActive=function(e){o.activePage=e},o.isActive=function(e){return o.activePage===e},o.season=a.seasons.get(),o.seasonType=a.seasonTypes.get(),e.$on(t.events().seasonSet,function(){o.season=a.seasons.get()}),e.$on(t.events().seasonTypeSet,function(){o.seasonType=a.seasonTypes.get()})}}),angular.module("lo30NgApp").component("topnavbarComponent",{bindings:{pageTitle:"<"},templateUrl:"js/components/topnavbar/topnavbar.html",controller:function(e,a,t,o){var s=this;s.$onInit=function(){s.pageTitle2=o.current.data.pageTitle},s.$onInit=function(){s.pageTitle2=o.current.data.pageTitle}}}),angular.module("lo30NgApp").controller("lo30GameScoreByPeriodDetailController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,o,s){t._;a.initializeScopeVariables=function(){a.local={scoreSheetEntryGoals:[],scoreSheetEntryScoring1st:[],scoreSheetEntryScoring2nd:[],scoreSheetEntryScoring3rd:[],scoreSheetEntryScoringOT:[],scoreSheetEntryPenalties:[],scoreSheetEntryPenalties1st:[],scoreSheetEntryPenalties2nd:[],scoreSheetEntryPenalties3rd:[],scoreSheetEntryPenaltiesOT:[],goalieStatGames:[],goalieStatGameWinner:[],goalieStatGameLoser:[],fetchScoreSheetEntryPenaltiesCompleted:!1,fetchScoreSheetEntryGoalsCompleted:!1,fetchGoalieStatGamesCompleted:!1}};var n=function(e){var t=e.map(function(e,t){return e.goalPlayerNameToDisplay=e.goalPlayerFirstName+" "+e.goalPlayerLastName,e.goalPlayerLastNameSuffix&&(e.goalPlayerNameToDisplay=e.goalPlayerNameToDisplay+" "+e.goalPlayerLastNameSuffix),e.assist1PlayerLastName&&(e.assist1PlayerNameToDisplay=e.assist1PlayerFirstName+" "+e.assist1PlayerLastName,e.assist1PlayerLastNameSuffix&&(e.assist1PlayerNameToDisplay=e.assist1PlayerNameToDisplay+" "+e.assist1PlayerLastNameSuffix)),e.assist2PlayerLastName&&(e.assist2PlayerNameToDisplay=e.assist2PlayerFirstName+" "+e.assist2PlayerLastName,e.assist2PlayerLastNameSuffix&&(e.assist2PlayerNameToDisplay=e.assist2PlayerNameToDisplay+" "+e.assist2PlayerLastNameSuffix)),e.assist3PlayerLastName&&(e.assist3PlayerNameToDisplay=e.assist3PlayerFirstName+" "+e.assist3PlayerLastName,e.assist3PlayerLastNameSuffix&&(e.assist3PlayerLastNameSuffix=e.assist3PlayerLastNameSuffix+" "+e.assist3PlayerLastNameSuffix)),e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameShort,1===e.period?a.local.scoreSheetEntryScoring1st.push(e):2===e.period?a.local.scoreSheetEntryScoring2nd.push(e):3===e.period?a.local.scoreSheetEntryScoring3rd.push(e):a.local.scoreSheetEntryScoringOT.push(e),e});return t},r=function(e){var t=e.map(function(e,t){return e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerLastNameSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerLastNameSuffix),e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameShort,1===e.period?a.local.scoreSheetEntryPenalties1st.push(e):2===e.period?a.local.scoreSheetEntryPenalties2nd.push(e):3===e.period?a.local.scoreSheetEntryPenalties3rd.push(e):a.local.scoreSheetEntryPenaltiesOT.push(e),e});return t},l=function(e){var t=e.map(function(e,t){return e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerLastNameSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerLastNameSuffix),e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameShort,1===e.wins?a.local.goalieStatGameWinner.push(e):a.local.goalieStatGameLoser.push(e),e});return t};a.fetchScoreSheetEntryGoals=function(e){a.local.fetchScoreSheetEntryGoalsCompleted=!1,a.local.scoreSheetEntriesGoals=[],o.scoreSheetEntryProcessedGoals.listForGameId(e).then(function(e){a.local.scoreSheetEntriesGoals=n(e)})["finally"](function(){a.local.fetchScoreSheetEntryGoalsCompleted=!0})},a.fetchScoreSheetEntryPenalties=function(e){a.local.fetchScoreSheetEntryPenaltiesCompleted=!1,a.local.scoreSheetEntryPenalties=[],o.scoreSheetEntryProcessedPenalties.listForGameId(e).then(function(e){a.local.scoreSheetEntryPenalties=r(e)})["finally"](function(){a.local.fetchScoreSheetEntryPenaltiesCompleted=!0})},a.fetchGoalieStatGames=function(e){a.local.fetchGoalieStatGamesCompleted=!1,a.local.goalieStatGames=[],o.goalieStatGames.listForGameId(e).then(function(e){a.local.goalieStatGames=l(e)})["finally"](function(){a.local.fetchGoalieStatGamesCompleted=!0})},a.activate=function(){a.initializeScopeVariables(),a.fetchScoreSheetEntryGoals(a.gameId),a.fetchScoreSheetEntryPenalties(a.gameId),a.fetchGoalieStatGames(a.gameId)},a.activate()}]),angular.module("lo30NgApp").directive("lo30GameScoreByPeriodDetail",[function(){return{restrict:"E",templateUrl:"js/directives/gameScoreByPeriodDetail/gameScoreByPeriodDetail.html",scope:{gameId:"="},controller:"lo30GameScoreByPeriodDetailController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").directive("lo30GameScoreByPeriodDetailGoalies",[function(){return{restrict:"E",templateUrl:"js/directives/gameScoreByPeriodDetailGoalies/gameScoreByPeriodDetailGoalies.html",scope:{goalieStatGameWinner:"=",goalieStatGameLoser:"="},link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").directive("lo30GameScoreByPeriodDetailPenalties",[function(){return{restrict:"E",templateUrl:"js/directives/gameScoreByPeriodDetailPenalties/gameScoreByPeriodDetailPenalties.html",scope:{scoreSheetEntryPenalties:"="},link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").directive("lo30GameScoreByPeriodDetailScoring",[function(){return{restrict:"E",templateUrl:"js/directives/gameScoreByPeriodDetailScoring/gameScoreByPeriodDetailScoring.html",scope:{scoreSheetEntryGoals:"="},link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30GameScoreByPeriodSummaryController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,o,s){var n=t._;a.initializeScopeVariables=function(){a.local={fetchGameCompleted:!1}},a.fetchGame=function(e){a.local.fetchGameCompleted=!1,a.game={},o.games.getForGameId(e).then(function(e){a.game=e,a.buildGameToDisplay()})["finally"](function(){a.local.fetchPlayerStatGamesCompleted=!0})},a.buildGameToDisplay=function(){a.local.gameToDisplay=n.clone(a.game),s.is("xs, sm")?(a.local.gameToDisplay.teamNameAwayToDisplay=a.game.teamCodeAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.game.teamCodeHome):s.is("md")?(a.local.gameToDisplay.teamNameAwayToDisplay=a.game.teamNameShortAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.game.teamNameShortHome):(a.local.gameToDisplay.teamNameAwayToDisplay=a.game.teamNameLongAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.game.teamNameLongHome)},a.activate=function(){a.initializeScopeVariables(),a.fetchGame(a.gameId)},a.activate()}]),angular.module("lo30NgApp").directive("lo30GameScoreByPeriodSummary",[function(){return{restrict:"E",templateUrl:"js/directives/gameScoreByPeriodSummary/gameScoreByPeriodSummary.html",scope:{gameId:"=",game:"="},controller:"lo30GameScoreByPeriodSummaryController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30GameSelectorController",["$log","$scope","$state","criteriaService",function(e,a,t,o){a.changeGame=function(e){o.games.setById(e),t.params.gameId=e,t.go(t.current.name,t.params,{location:"replace",inherit:!1,notify:!1})},a.activate=function(){a.games=o.games.get()},a.activate()}]),angular.module("lo30NgApp").directive("lo30GameSelector",[function(){return{restrict:"E",templateUrl:"js/directives/gameSelector/gameSelector.html",scope:{},controller:"lo30GameSelectorController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30PageHeaderController",["$log","$scope","$state","criteriaService","broadcastService",function(e,a,t,o,s){var n=this;n.$onInit=function(){a.pageTitle=t.current.data.pageTitle}}]),angular.module("lo30NgApp").directive("lo30PageHeader",[function(){return{restrict:"E",templateUrl:"js/directives/pageHeader/pageHeader.html",scope:{},controller:"lo30PageHeaderController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30PageHeaderGamesController",["$log","$scope","$state","criteriaService","broadcastService",function(e,a,t,o,s){var n=this;a.toggleSeasonCriteriaPanel=function(){a.seasonCriteriaPanelOpen=!a.seasonCriteriaPanelOpen},a.toggleGameCriteriaPanel=function(){a.gameCriteriaPanelOpen=!a.gameCriteriaPanelOpen};var r=function(){a.$watch(function(){return t.params.seasonId},function(e){sjv.isNotEmpty(e)&&o.seasons.setById(t.params.seasonId)}),a.$watch(function(){return t.params.gameId},function(e){sjv.isNotEmpty(e)&&o.games.setById(t.params.gameId)}),a.$on(s.events().seasonSet,function(){a.season=o.seasons.get()}),a.$on(s.events().gameSet,function(){a.game=o.games.get()})};n.$onInit=function(){a.seasonCriteriaPanelOpen=!1,a.seasonTypeCriteriaPanelOpen=!1,a.pageTitle=t.current.data.pageTitle,a.season=o.seasons.get(),a.seasonType=o.seasonTypes.get(),r()}}]),angular.module("lo30NgApp").directive("lo30PageHeaderGames",[function(){return{restrict:"E",templateUrl:"js/directives/pageHeaderGames/pageHeaderGames.html",scope:{},controller:"lo30PageHeaderGamesController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30PageHeaderSeasonsController",["$log","$scope","$state","criteriaService","broadcastService",function(e,a,t,o,s){var n=this;a.toggleSeasonCriteriaPanel=function(){a.seasonCriteriaPanelOpen=!a.seasonCriteriaPanelOpen},a.toggleSeasonTypeCriteriaPanel=function(){a.seasonTypeCriteriaPanelOpen=!a.seasonTypeCriteriaPanelOpen};var r=function(){a.$watch(function(){return t.params.seasonId},function(e){sjv.isNotEmpty(e)&&o.seasons.setById(t.params.seasonId)}),a.$watch(function(){return t.params.seasonTypeId},function(e){sjv.isNotEmpty(e)&&o.seasonTypes.setById(t.params.seasonTypeId)}),a.$on(s.events().seasonSet,function(){a.season=o.seasons.get()}),a.$on(s.events().seasonTypeSet,function(){a.seasonType=o.seasonTypes.get()})};n.$onInit=function(){a.seasonCriteriaPanelOpen=!1,a.seasonTypeCriteriaPanelOpen=!1,a.pageTitle=t.current.data.pageTitle,a.season=o.seasons.get(),a.seasonType=o.seasonTypes.get(),r()}}]),angular.module("lo30NgApp").directive("lo30PageHeaderSeasons",[function(){return{restrict:"E",templateUrl:"js/directives/pageHeaderSeasons/pageHeaderSeasons.html",scope:{},controller:"lo30PageHeaderSeasonsController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30PageHeaderSeasonsOnlyController",["$log","$scope","$state","criteriaService","broadcastService",function(e,a,t,o,s){var n=this;a.toggleSeasonCriteriaPanel=function(){a.seasonCriteriaPanelOpen=!a.seasonCriteriaPanelOpen};var r=function(){a.$watch(function(){return t.params.seasonId},function(e){sjv.isNotEmpty(e)&&o.seasons.setById(t.params.seasonId)}),a.$on(s.events().seasonSet,function(){a.season=o.seasons.get()})};n.$onInit=function(){a.seasonCriteriaPanelOpen=!1,a.pageTitle=t.current.data.pageTitle,a.season=o.seasons.get(),r()}}]),angular.module("lo30NgApp").directive("lo30PageHeaderSeasonsOnly",[function(){return{restrict:"E",templateUrl:"js/directives/pageHeaderSeasonsOnly/pageHeaderSeasonsOnly.html",scope:{},controller:"lo30PageHeaderSeasonsOnlyController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30SeasonSelectorController",["$log","$scope","$state","criteriaService",function(e,a,t,o){a.changeSeason=function(e){o.seasons.setById(e),a.decades=o.decades.get(),t.params.seasonId=e,t.go(t.current.name,t.params,{location:"replace",inherit:!1,notify:!1})},a.activate=function(){a.decades=o.decades.get()},a.activate()}]),angular.module("lo30NgApp").directive("lo30SeasonSelector",[function(){return{restrict:"E",templateUrl:"js/directives/seasonSelector/seasonSelector.html",scope:{},controller:"lo30SeasonSelectorController",link:function(e,a,t,o){}}}]),angular.module("lo30NgApp").controller("lo30SeasonTypeSelectorController",["$log","$scope","$state","criteriaService",function(e,a,t,o){a.changeSeasonType=function(){o.seasonTypes.setById(a.selectedSeasonTypeId),t.params.seasonTypeId=a.selectedSeasonTypeId,t.go(t.current.name,t.params,{location:"replace",inherit:!1,notify:!1})},a.activate=function(){var e=o.seasonTypes.get();a.selectedSeasonTypeId=e.seasonTypeId},a.activate()}]),angular.module("lo30NgApp").directive("lo30SeasonTypeSelector",[function(){return{restrict:"E",templateUrl:"js/directives/seasonTypeSelector/seasonTypeSelector.html",scope:{},controller:"lo30SeasonTypeSelectorController",link:function(e,a,t,o){}}}]),lo30NgApp.directive("lo30CriteriaSelector",[function(){return{restrict:"E",templateUrl:"/views/directives/criteriaSelector.html",scope:{},controller:"lo30CriteriaSelectorController",link:function(e,a,t,o){}}}]),lo30NgApp.controller("lo30CriteriaSelectorController",["$log","$scope","broadcastService","externalLibService","apiService","criteriaService",function(e,a,t,o,s,n){var r=(o._,o.sjv);a.initializeScopeVariables=function(){a.local={seasons:[],games:[],seasonTypes:[]}},a.setWatches=function(){a.$watch("local.selectedSeason",function(e,t){r.isNotEmpty(e)&&r.isNotEmpty(t)&&e!==t&&n.season.set(a.local.selectedSeason)}),a.$watch("local.selectedSeasonType",function(e,t){r.isNotEmpty(e)&&r.isNotEmpty(t)&&e!==t&&n.seasonType.set(a.local.selectedSeasonType)}),a.$watch("local.selectedGame",function(e,t){r.isNotEmpty(e)&&r.isNotEmpty(t)&&e!==t&&n.game.set(a.local.selectedGame)})},a.activate=function(){a.initializeScopeVariables(),a.setWatches(),a.local.seasons=n.season.data(),a.local.selectedSeason=n.season.get(),a.local.seasonTypes=n.seasonType.data(),a.local.selectedSeasonType=n.seasonType.get(),a.local.games=n.game.data(),a.local.selectedGame=n.game.get()},a.activate()}]),lo30NgApp.directive("lo30DatatablesFilterRowHider",[function(){return{restrict:"E",templateUrl:"/views/directives/datatablesFilterRowHider.html",scope:{},link:function(e,a,t,o){{var s=a.parents("div");s.find("datatables-filter-row")}}}}]),lo30NgApp.directive("lo30FilterBy",[function(){return{restrict:"E",templateUrl:"/views/directives/filterBy.html",scope:{gameId:"="},controller:"lo30FilterByController",link:function(e,a,t,o){}}}]),lo30NgApp.controller("lo30FilterByController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,o,s){t._;a.initializeScopeVariables=function(){a={teams:[],fetchTeamsCompleted:!1}},a.fetchTeams=function(e){a.local.fetchTeamsCompleted=!1,a.local.teams=[],o.teams.listForSeasonId(e).then(function(e){a.local.teams=e,angular.forEach(e,function(e,a){e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameShort})})["finally"](function(){a.local.fetchScoreSheetEntryGoalsCompleted=!0})},a.activate=function(){a.initializeScopeVariables(),a.fetchTeams(a.seasonId)},a.activate()}]),lo30NgApp.directive("lo30Footable",[function(e){return{link:{post:function(a,t){if(!a.$last)return!1;var o=t.parents("table");a.$evalAsync(function(){o.hasClass("footable-loaded")||o.footable(),o.data("__FooTable__").draw(),e(t.contents())(a)})}},pre:function(a,t){e(t.contents())(a)}}}]),lo30NgApp.directive("lo30FootableFilterInput",[function(){return{restrict:"E",template:'<input id="filter" type="text" class="input-datatables-filter" />',scope:{},link:function(a,t,o,s){t.parents("table");e.preventDefault();var n=$("table").data("footable-filter");alert('about to filter table by "tech"'),n.filter("tech"),confirm("clear filter now?")&&n.clearFilter()}}}]),lo30NgApp.directive("lo30FullScroll",[function(){return{restrict:"A",link:function(e,a){$timeout(function(){a.slimscroll({height:"100%",railOpacity:.9})})}}}]),lo30NgApp.directive("lo30GameScoreByPeriodDetail",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetail.html",scope:{gameId:"="},controller:"lo30GameScoreByPeriodDetailController",link:function(e,a,t,o){}}}]),lo30NgApp.controller("lo30GameScoreByPeriodDetailController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,o,s){t._;a.initializeScopeVariables=function(){a.local={scoreSheetEntryGoals:[],scoreSheetEntryScoring1st:[],scoreSheetEntryScoring2nd:[],scoreSheetEntryScoring3rd:[],scoreSheetEntryScoringOT:[],scoreSheetEntryPenalties:[],scoreSheetEntryPenalties1st:[],scoreSheetEntryPenalties2nd:[],scoreSheetEntryPenalties3rd:[],scoreSheetEntryPenaltiesOT:[],goalieStatGames:[],goalieStatGameWinner:{},goalieStatGameLoser:{},fetchScoreSheetEntryPenaltiesCompleted:!1,fetchScoreSheetEntryGoalsCompleted:!1,fetchGoalieStatGamesCompleted:!1}},a.fetchScoreSheetEntryGoals=function(e){a.local.fetchScoreSheetEntryGoalsCompleted=!1,a.local.scoreSheetEntriesGoals=[],o.scoreSheetEntryProcessedGoals.listForGameId(e).then(function(e){a.local.scoreSheetEntriesGoals=e,angular.forEach(e,function(e,t){e.goalPlayerNameToDisplay=e.goalPlayerFirstName+" "+e.goalPlayerLastName,e.goalPlayerLastNameSuffix&&(e.goalPlayerNameToDisplay=e.goalPlayerNameToDisplay+" "+e.goalPlayerLastNameSuffix),e.assist1PlayerLastName&&(e.assist1PlayerNameToDisplay=e.assist1PlayerFirstName+" "+e.assist1PlayerLastName,e.assist1PlayerLastNameSuffix&&(e.assist1PlayerNameToDisplay=e.assist1PlayerNameToDisplay+" "+e.assist1PlayerLastNameSuffix)),e.assist2PlayerLastName&&(e.assist2PlayerNameToDisplay=e.assist2PlayerFirstName+" "+e.assist2PlayerLastName,e.assist2PlayerLastNameSuffix&&(e.assist2PlayerNameToDisplay=e.assist2PlayerNameToDisplay+" "+e.assist2PlayerLastNameSuffix)),e.assist3PlayerLastName&&(e.assist3PlayerNameToDisplay=e.assist3PlayerFirstName+" "+e.assist3PlayerLastName,e.assist3PlayerLastNameSuffix&&(e.assist3PlayerLastNameSuffix=e.assist3PlayerLastNameSuffix+" "+e.assist3PlayerLastNameSuffix)),e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameShort,1===e.period?a.local.scoreSheetEntryScoring1st.push(e):2===e.period?a.local.scoreSheetEntryScoring2nd.push(e):3===e.period?a.local.scoreSheetEntryScoring3rd.push(e):a.local.scoreSheetEntryScoringOT.push(e)})})["finally"](function(){a.local.fetchScoreSheetEntryGoalsCompleted=!0})},a.fetchScoreSheetEntryPenalties=function(e){a.local.fetchScoreSheetEntryPenaltiesCompleted=!1,a.local.scoreSheetEntryPenalties=[],o.scoreSheetEntryProcessedPenalties.listForGameId(e).then(function(e){a.local.scoreSheetEntryPenalties=e,angular.forEach(e,function(e,t){e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerLastNameSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerLastNameSuffix),e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameShort,1===e.period?a.local.scoreSheetEntryPenalties1st.push(e):2===e.period?a.local.scoreSheetEntryPenalties2nd.push(e):3===e.period?a.local.scoreSheetEntryPenalties3rd.push(e):a.local.scoreSheetEntryPenaltiesOT.push(e)})})["finally"](function(){a.local.fetchScoreSheetEntryPenaltiesCompleted=!0})},a.fetchGoalieStatGames=function(e){a.local.fetchGoalieStatGamesCompleted=!1,a.local.goalieStatGames=[],o.goalieStatGames.listForGameId(e).then(function(e){a.local.goalieStatGames=e,angular.forEach(e,function(e,t){e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerLastNameSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerLastNameSuffix),e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameShort,1===e.wins?a.local.goalieStatGameWinner=e:a.local.goalieStatGameLoser=e})})["finally"](function(){a.local.fetchGoalieStatGamesCompleted=!0})},a.activate=function(){a.initializeScopeVariables(),a.fetchScoreSheetEntryGoals(a.gameId),a.fetchScoreSheetEntryPenalties(a.gameId),a.fetchGoalieStatGames(a.gameId)},a.activate()}]),lo30NgApp.directive("lo30GameScoreByPeriodDetailGoalies",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetailGoalies.html",scope:{goalieStatGameWinner:"=",goalieStatGameLoser:"=",goalieStatGames:"="},link:function(e,a,t,o){}}}]),lo30NgApp.directive("lo30GameScoreByPeriodDetailPenalties",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetailPenalties.html",scope:{scoreSheetEntryPenalties:"="},link:function(e,a,t,o){}}}]),lo30NgApp.directive("lo30GameScoreByPeriodDetailScoring",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetailScoring.html",scope:{scoreSheetEntryGoals:"="},link:function(e,a,t,o){}}}]),lo30NgApp.directive("lo30GameScoreByPeriodSummary",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodSummary.html",scope:{gameId:"="},controller:"lo30GameScoreByPeriodSummaryController",link:function(e,a,t,o){}}}]),lo30NgApp.controller("lo30GameScoreByPeriodSummaryController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,o,s){var n=t._;a.initializeScopeVariables=function(){a.local={game:{},fetchGameCompleted:!1}},a.fetchGame=function(e){a.local.fetchGameCompleted=!1,a.local.game={},o.games.getForGameId(e).then(function(e){a.local.game=e,a.buildGameToDisplay()})["finally"](function(){a.local.fetchPlayerStatGamesCompleted=!0})},a.buildGameToDisplay=function(){a.local.gameToDisplay=n.clone(a.local.game),s.is("xs, sm")?(a.local.gameToDisplay.teamNameAwayToDisplay=a.local.game.teamCodeAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.local.game.teamCodeHome):s.is("md")?(a.local.gameToDisplay.teamNameAwayToDisplay=a.local.game.teamNameShortAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.local.game.teamNameShortHome):(a.local.gameToDisplay.teamNameAwayToDisplay=a.local.game.teamNameLongAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.local.game.teamNameLongHome)},a.activate=function(){a.initializeScopeVariables(),a.fetchGame(a.gameId)},a.activate()}]),angular.module("lo30NgApp").controller("mainController",function(e){
var a=this;a.userName="Example user",a.helloText="Welcome in INSPINIA Gulp SeedProject",a.descriptionText="It is an application skeleton for a typical AngularJS web app. You can use it to quickly bootstrap your angular webapp projects."}),lo30NgApp.directive("lo30PageInit",[function(e){return{restrict:"E",scope:{},link:function(a,t,o){a.$watch("$viewContentLoaded",function(){$(".eeh-navigation-sidebar").addClass("sidebar-text-collapsed")}),e.sidebarIsCollapsed}}}]),lo30NgApp.directive("lo30SideNavigation",["$timeout",function(e){return{restrict:"A",link:function(a,t){e(function(){t.metisMenu()})}}}]),lo30NgApp.directive("lo30SlimScroll",[function(){return{restrict:"A",scope:{boxHeight:"@"},link:function(e,a){$timeout(function(){a.slimscroll({height:e.boxHeight,railOpacity:.9})})}}}]),angular.module("lo30NgApp").controller("statsPlayersController",function(e,a,t,o,s,n,r,l,i,c,m,p,u){var y=i._,d=(i.sjv,this);d.dtInstance={};var f=-1,h=o.defer();d.playerStatsFiltered=[],d.playerStats=[];var S=function(){d.dtOptions=m.newOptions(),d.dtColumns=[p.newColumn("rank").withTitle("Rank"),p.newColumn("playerNameToDisplay").withTitle("Player"),p.newColumn("games").withTitle("Games"),p.newColumn("goals").withTitle("Goals"),p.newColumn("assists").withTitle("Assists"),p.newColumn("points").withTitle("Points"),p.newColumn("penaltyMinutes").withTitle("PIM"),p.newColumn("powerPlayGoals").withTitle("PPG"),p.newColumn("shortHandedGoals").withTitle("SHG"),p.newColumn("gameWinningGoals").withTitle("GWG"),p.newColumn("teamNameToDisplay").withTitle("Team"),p.newColumn("position").withTitle("Position"),p.newColumn("line").withTitle("Line"),p.newColumn("sub").withTitle("Sub")]},g=function(){d.dtOptions=m.fromFnPromise(function(){return h.promise}).withOption("processing",!0).withOption("paging",!0).withOption("bFilter",!1).withOption("bInfo",!0).withOption("page-length",10).withOption("searching",!1).withOption("order",[[5,"desc"]]).withOption("scrollX",!0).withPaginationType("full_numbers").withDisplayLength(10).withBootstrap().withButtons(["colvis","copyHtml5","excelHtml5",{extend:"pdfHtml5",orientation:"landscape",pageSize:"letter"}]).withDOM("<'row'<'col-sm-4'li><'col-sm-4'f><'col-sm-4'<'html5buttons'B>><'clearfix'>><'row'<'col-sm-12'rt>><'row'<'col-sm-3 text-left'i><'col-sm-9'<'pull-right'p>>>")},T=function(e,a,t,o){d.dataLoaded=!1;var s=[],n="playerStatTeams";"goalie"===t&&(n="goalieStatTeams"),r[n].listForSeasonIdSeasonTypeId(e,a).then(function(e){s=y.sortBy(e,function(e){return-1*e.points}),s=N(s)})["finally"](function(){d.playerStats=s,d.playerStatsFiltered=x(d.playerStats,d.searchText),h.resolve(d.playerStatsFiltered),d.dataLoaded=!0})},N=function(e){var a=e.map(function(e,a){return e.sub=e.sub?"Y":"N",e.rank=a+1,l.is("xs, sm")?(e.teamNameToDisplay=e.teamCode,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):l.is("md")?(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},w=function(e){r.teams.listForSeasonId(e).then(function(e){d.teams=v(e)})["finally"](function(){})},v=function(e){var a=e.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=l.is("xs, sm")?e.teamCode:l.is("md")?e.teamNameShort:e.teamNameShort,e});return a};e.filterByTeam=function(e){f=10;var a;a=l.is("xs, sm")?e.teamCode:l.is("md")?e.teamNameShort:e.teamNameShort;var t="team:"+d.selectedTeam,o="team:"+a;d.selectedTeam&&C(t),d.selectedTeam===a?d.selectedTeam=null:(P(),D(o),d.selectedTeam=a),d.playerStatsFiltered=x(d.playerStats,d.searchText)},e.filterBySub=function(e){var a="sub:"+I(d.selectedSub),t="sub:"+I(e);d.selectedSub&&C(a),d.selectedSub===e?d.selectedSub=null:(P(),D(t),d.selectedSub=e),d.playerStatsFiltered=x(d.playerStats,d.searchText)};var I=function(e){var a;switch(e){case"With":a="Y";break;case"Without":a="N";break;default:a=e}return a};e.filterByLine=function(e){var a="line:"+d.selectedLine,t="line:"+e;d.selectedLine&&C(a),d.selectedLine===e?d.selectedLine=null:(P(),D(t),d.selectedLine=e),d.playerStatsFiltered=x(d.playerStats,d.searchText)},e.filterByPosition=function(e){var a="pos:"+d.selectedPosition,t="pos:"+e;d.selectedPosition&&C(a),d.selectedPosition===e?d.selectedPosition=null:(P(),D(t),d.selectedPosition=e),d.playerStatsFiltered=x(d.playerStats,d.searchText)};var D=function(e){d.searchText=d.searchText+e},C=function(e){d.searchText=d.searchText.replace(", "+e,""),d.searchText=d.searchText.replace(e+", ",""),d.searchText=d.searchText.replace(e,"")},P=function(){d.searchText=d.searchText?d.searchText+", ":""},b=function(e){var a=[],t=e.split(",");return angular.forEach(t,function(e){var t=e.split(":");if(0!==t.length&&t[1]){var o,s=t[0].replace(/(^\s+|\s+$)/g,""),n=t[1].toLowerCase();switch(s.toLowerCase()){case"rank":o="ranking";break;case"team":o=l.is("xs, sm")?"teamCode":"teamNameShort";break;case"player":o="player";break;case"pos":case"position":o="position";break;case"line":o="line";break;case"sub":o="sub"}a.push({key:o,value:n})}else a.push({key:"TEXTONLY",value:t})}),a},x=function(e,a){if(!a)return e;var t=b(a),o=[];return angular.forEach(e,function(e){var a=[];angular.forEach(t,function(t){if("TEXTONLY"===t.key)-1!==JSON.stringify(e).toLowerCase().indexOf(t.value)&&a.push(e);else{var o=e[t.key];o&&("string"!=typeof o&&(o=JSON.stringify(o)),-1!==o.toLowerCase().indexOf(t.value)&&a.push(e))}}),a.length===t.length&&o.push(e)}),o},G=function(e,a,t,o){w(e),T(e,a,t,o)},F=function(){e.$on(c.events().seasonSet,function(){var e=n.seasons.get();d.seasonId=e.seasonId,G(d.seasonId,d.seasonTypeId,d.playerType,!1)}),e.$on(c.events().seasonTypeSet,function(){var e=n.seasonTypes.get();d.seasonTypeId=e.seasonTypeId,G(d.seasonId,d.seasonTypeId,d.playerType,!1)}),e.$watch(function(){return a.params.playerType},function(e){d.playerType=e}),e.$watch(function(){return d.dtInstance},function(e,a){e!==a&&(d.dtInstance=e)})};d.$onInit=function(){d.dataLoaded=!1,d.positions=["F","D","G"],d.subs=["With","Without"],d.lines=["1","2","3"];var o=n.seasons.get();d.seasonId=o.seasonId;var s=n.seasonTypes.get();d.seasonTypeId=s.seasonTypeId,d.playerType=a.params.playerType,e.filterBySub("Without"),G(d.seasonId,d.seasonTypeId,d.playerType,!0),S(),t(function(){F(),g()},100)}}),angular.module("lo30NgApp").controller("statsPlayersController",function(e,a,t,o,s,n,r,l,i,c,m,p,u,y){var d=(c._,c.sjv,this),f=function(e){l.teams.listForSeasonId(e).then(function(e){d.teams=h(e)})["finally"](function(){})},h=function(e){var a=e.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=i.is("xs, sm")?e.teamCode:i.is("md")?e.teamNameShort:e.teamNameShort,e});return a},S=function(a,t,o,s){f(a),e.dtSkatersStats.ajax.url("../api/playerstatteams/seasons/"+d.seasonId+"/seasonTypes/"+d.seasonTypeId+"?key=1").load()};a.removeSearch=function(){a.searchText=null,e.dtSkatersStats.search("").draw()},a.performSearch=function(){var t=a.searchText?a.searchText:"";e.dtSkatersStats.search(t).draw()};var g=function(a,t){e.dtSkatersStats.columns(a).search(t).draw()},T=function(a){e.dtSkatersStats.columns(a).search("").draw()},N=function(e,a,t){return t&&T(e),a===t?t=null:(t=a,g(e,a)),t};a.filterByTeam=function(e){var a,t=10;a=i.is("xs, sm")?e.teamCode:i.is("md")?e.teamNameShort:e.teamNameShort,d.selectedTeam=N(t,a,d.selectedTeam)};var w=function(e){var a;return a="With"===e?"Y":"Without"===e?"N":"Y"===e?"With":"N"===e?"Without":null};a.filterBySub=function(e){var a=13,t=w(e),o=w(d.selectedSub);o=N(a,t,o),d.selectedSub=w(o)},a.filterByLine=function(e){var a=12;d.selectedLine=N(a,e,d.selectedLine)},a.filterByPosition=function(e){var a=11;d.selectedPosition=N(a,e,d.selectedPosition)};var v=function(){a.$on(m.events().seasonSet,function(){var e=r.seasons.get();d.seasonId=e.seasonId,S(d.seasonId,d.seasonTypeId,d.playerType,!1)}),a.$on(m.events().seasonTypeSet,function(){var e=r.seasonTypes.get();d.seasonTypeId=e.seasonTypeId,S(d.seasonId,d.seasonTypeId,d.playerType,!1)}),a.$watch(function(){return t.params.playerType},function(e){d.playerType=e}),a.$watch("searchText",function(e,t){e!==t&&a.performSearch(e)})};d.$onInit=function(){d.dataLoaded=!1,d.positions=["F","D","G"],d.subs=["With","Without"],d.lines=["1","2","3"];var e=r.seasons.get();d.seasonId=e.seasonId;var s=r.seasonTypes.get();d.seasonTypeId=s.seasonTypeId,d.playerType=t.params.playerType,a.filterBySub("Without"),S(d.seasonId,d.seasonTypeId,d.playerType,!0),o(function(){v()},100)}});