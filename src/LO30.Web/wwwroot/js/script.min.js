"use strict";angular.module("lo30NgApp").directive("sideNavigation",function(e){return{restrict:"A",link:function(a,t){a.$watch("authentication.user",function(){e(function(){t.metisMenu()})})}}}).directive("minimalizaSidebar",function(e){return{restrict:"A",template:'<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',controller:function(a){a.minimalize=function(){angular.element("body").toggleClass("mini-navbar"),!angular.element("body").hasClass("mini-navbar")||angular.element("body").hasClass("body-small")?(angular.element("#side-menu").hide(),e(function(){angular.element("#side-menu").fadeIn(400)},200)):angular.element("#side-menu").removeAttr("style")}}}}).directive("pageTitle",function(e){return{restrict:"E",template:"<h4>{{pageTitle}}abc</h4>",link:function(a,t,s){a.$watch("stateData",function(e){a.pageTitle=e.pageTitle},!0),a.stateData=e.current.data}}}),function(){angular.module("lo30NgApp",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ui.router","ui.bootstrap","pageslide-directive","matchMedia","datatables","datatables.bootstrap","datatables.buttons","datatables.columnfilter","frapontillo.bootstrap-switch"])}(),function(){function e(e,a){e.state("root",{"abstract":!0,url:"/r",templateUrl:"js/components/common/root.html"}).state("root.main",{url:"/main",templateUrl:"js/main/main.html",controller:"mainController",controllerAs:"vm",data:{pageTitle:"Main view"}}).state("root.standings",{url:"/standings/seasons/:seasonId/seasontypes/:seasonTypeId",templateUrl:"js/standings/standings.html",controller:"standingsController",controllerAs:"vm",data:{pageTitle:"Standings"}}).state("root.standings2",{url:"/standings",templateUrl:"js/standings/standings.html",controller:"standingsController",controllerAs:"vm",data:{pageTitle:"Standings"}}).state("root.stats",{url:"/stats/playertypes/:playerType/seasons/:seasonId/seasontypes/:seasonTypeId",templateUrl:"js/statsPlayers/statsPlayers.html",controller:"statsPlayersController",controllerAs:"vm",data:{pageTitle:"Stats"}}).state("root.stats2",{url:"/stats/playertypes/:playerType",templateUrl:"js/statsPlayers/statsPlayers.html",controller:"statsPlayersController",controllerAs:"vm",data:{pageTitle:"Stats"}}).state("root.profiles",{url:"/profiles/players/:playerId/playertypes/:playerType/seasons/:seasonId/seasontypes/:seasonTypeId?tab",templateUrl:"js/profilesPlayers/profilesPlayers.html",controller:"profilesPlayersController",controllerAs:"vm",data:{pageTitle:"Profiles"}}).state("root.profiles2",{url:"/profiles/players/:playerId/playertypes/:playerType?tab",templateUrl:"js/profilesPlayers/profilesPlayers.html",controller:"profilesPlayersController",controllerAs:"vm",data:{pageTitle:"Profiles"}}).state("root.careers",{url:"/careers/playertypes/:playerType",templateUrl:"js/careers/careers.html",controller:"careersController",controllerAs:"vm",data:{pageTitle:"Careers"}}),a.otherwise("/r/standings")}angular.module("lo30NgApp").config(e),angular.module("lo30NgApp").config(["$urlRouterProvider",function(e){e.deferIntercept()}])}(),function(){angular.module("lo30NgApp").run(["$rootScope","$urlRouter","$location","$state",function(e,a,t,s){e.$on("$locationChangeSuccess",function(e,t,o){e.preventDefault(),("main.exampleState"!==s.current.name||"http://some.url"===t||"https://another.url"!==o)&&a.sync()}),a.listen()}])}(),$(document).ready(function(){function e(){var e=$("body > #wrapper").height()-61;$(".sidebard-panel").css("min-height",e+"px");var a=$("nav.navbar-default").height(),t=$("#page-wrapper").height();a>t&&$("#page-wrapper").css("min-height",a+"px"),t>a&&$("#page-wrapper").css("min-height",$(window).height()+"px"),$("body").hasClass("fixed-nav")&&(a>t?$("#page-wrapper").css("min-height",a-60+"px"):$("#page-wrapper").css("min-height",$(window).height()-60+"px"))}$(window).bind("load resize scroll",function(){$("body").hasClass("body-small")||e()}),$(window).scroll(function(){$(window).scrollTop()>0&&!$("body").hasClass("fixed-nav")?$("#right-sidebar").addClass("sidebar-top"):$("#right-sidebar").removeClass("sidebar-top")}),setTimeout(function(){e()})}),$(function(){$(window).bind("load resize",function(){$(document).width()<769?$("body").addClass("body-small"):$("body").removeClass("body-small")})}),angular.module("lo30NgApp").controller("careersController",function(e,a,t,s,o,n,r,l,i,c,p,m,u,y){var d=(c._,c.sjv,this),f={},S=function(){d.dtOptions=m.newOptions(),d.dtColumns=[u.newColumn("rank").withTitle("Rank"),u.newColumn("playerNameToDisplay").withTitle("Player"),u.newColumn("seasons").withTitle("Seasons"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")],d.dtInstance={}},T=function(){d.dtOptions=m.fromFnPromise(function(){return f.promise}).withOption("processing",!1).withOption("paging",!0).withOption("bFilter",!1).withOption("bInfo",!0).withOption("searching",!1).withOption("scrollX",!0).withBootstrap()},h=function(e){d.dataLoaded=!1;var a=[],t="playerStatCareers";"goalie"===e&&(t="goalieStatCareers"),l[t].list().then(function(e){a=g(e)})["finally"](function(){f.resolve(a),d.dataLoaded=!0})},g=function(e){var a=e.map(function(e,a){return e.rank=a+1,i.is("xs, sm")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):i.is("md")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},N=function(e){h(e)},v=function(){a.$watch(function(){return t.params.playerType},function(e){d.playerType=e})};d.$onInit=function(){d.dataLoaded=!1,f=o.defer(),d.playerType=t.params.playerType,S(),s(function(){v(),T(),N(d.playerType)},100)}}),angular.module("lo30NgApp").filter("filterize",function(e){var a=function(a){var t=[],s=a.split(",");return angular.forEach(s,function(a){var s=a.split(":");if(0!==s.length&&s[1]){var o,n=s[0].replace(/(^\s+|\s+$)/g,""),r=s[1].toLowerCase();switch(n.toLowerCase()){case"rank":o="ranking";break;case"team":o=e.is("xs, sm")?"teamCode":"teamNameShort";break;case"player":o="player";break;case"pos":case"position":o="position";break;case"line":o="line";break;case"sub":o="sub"}t.push({key:o,value:r})}else t.push({key:"TEXTONLY",value:s})}),t};return function(e,t){if(!t)return e;var s=a(t),o=[];return angular.forEach(e,function(e){var a=[];angular.forEach(s,function(t){if("TEXTONLY"===t.key)-1!==JSON.stringify(e).toLowerCase().indexOf(t.value)&&a.push(e);else{var s=e[t.key];s&&("string"!=typeof s&&(s=JSON.stringify(s)),-1!==s.toLowerCase().indexOf(t.value)&&a.push(e))}}),a.length===s.length&&o.push(e)}),o}}),angular.module("lo30NgApp").filter("percentage",["$filter",function(e){return function(a,t){return e("number")(100*a,t)+"%"}}]),angular.module("lo30NgApp").controller("mainController",function(e){var a=this;a.userName="Example user",a.helloText="Welcome in INSPINIA Gulp SeedProject",a.descriptionText="It is an application skeleton for a typical AngularJS web app. You can use it to quickly bootstrap your angular webapp projects."}),lo30NgApp.controller("careersController",function(e,a,t,s,o,n,r,l,i,c){var p=r._;e.initializeScopeVariables=function(){e.local={screenSizeIsDesktop:!1,screenSizeIsTablet:!1,screenSizeIsMobile:!1,selectedPlayerType:"skater",playerStatCareers:[],playerStatCareersToDisplay:[],fetchPlayerStatCareersCompleted:!1,searchText:null,criteriaSeasonId:-1,criteriaSeasonTypeId:-1}},e.resetSort=function(e){},e.addNewSearchToSearch=function(a){e.local.searchText=e.local.searchText+a},e.removeExistingSearchFromSearch=function(a){e.local.searchText=e.local.searchText.replace(", "+a,""),e.local.searchText=e.local.searchText.replace(a+", ",""),e.local.searchText=e.local.searchText.replace(a,"")},e.prepSearchForNewSearch=function(){e.local.searchText=e.local.searchText?e.local.searchText+", ":""},e.sortAscOnly=function(a){e.sortOn=a,e.sortDirection=!1},e.sortDescOnly=function(a){e.sortOn=a,e.sortDirection=!0},e.sortAscFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!1)},e.sortDescFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!0)},e.sortClass=function(a,t){var s="";return e.sortOn===a&&(s=e.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),s},e.removeSearch=function(){e.local.searchText=null,e.local.selectedTeam=null,e.local.selectedPosition=null,e.local.selectedLine=null,e.local.selectedSub=null},e.fetchPlayerStatTeams=function(a,t){e.local.fetchPlayerStatCareersCompleted=!1,e.local.playerStatCareers=[];var s="playerStatCareers";"goalie"===e.local.selectedPlayerType&&(s="goalieStatCareers"),o[s].list().then(function(a){e.local.playerStatCareers=p.sortBy(a,function(e){return-1*e.points}),e.buildPlayerStatCareersToDisplay()})["finally"](function(){e.local.fetchPlayerStatCareersCompleted=!0})},e.buildPlayerStatCareersToDisplay=function(){e.local.playerStatCareersToDisplay=e.local.playerStatCareers.map(function(a,t){return a.rank=t+1,e.local.screenSizeIsMobile?(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):e.local.screenSizeIsTablet?(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)),a})},e.fetchData=function(){e.fetchPlayerStatTeams()},e.setWatches=function(){},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});c.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),e.local.screenSizeIsDesktop=n.is("lg"),e.local.screenSizeIsTablet=n.is("md"),e.local.screenSizeIsMobile=n.is("xs, sm"),t.playerType&&(e.local.selectedPlayerType=t.playerType),e.fetchData(),s(function(){"skater"===e.local.selectedPlayerType?e.sortDescFirst("points"):e.sortAscFirst("goalsAgainstAverage")},0)},e.activate()}),angular.module("lo30NgApp").factory("criteriaServiceOLD",function(e,a,t,s,o){var n,r,l,i=s._,c={season:{},seasonType:{},game:{},gameLastProcessed:{}},p={season:"not set",seasonType:"not set",game:"not set"},m=function(){return e.debug("criteriaService.fetchSeasons()"),n=[],t.seasons.listForSeasonsWithGameSelection().then(function(e){if(n=e,c.season.isNotSet()){var a=i.find(n,function(e){return e.isCurrentSeason===!0});return c.season.set(a)}return c.season.get()})},u=function(a,t){e.debug("criteriaService.fetchSeasonTypes()  for seasonId:"+t+" for gamePlayoffs: "+a),l=[{seasonTypeId:0,seasonTypeName:"Regular Season"},{seasonTypeId:1,seasonTypeName:"Playoffs"}];var s;return a?(s=i.find(l,function(e){return"Playoffs"===e.seasonTypeName}),c.seasonType.set(s)):(s=i.find(l,function(e){return"Regular Season"===e.seasonTypeName}),c.seasonType.set(s))},y=function(a){return e.debug("criteriaService.fetchGames() for seasonId:"+a),r=[],t.games.listForSeasonId(a).then(function(e){return r=e,t.dataProcessing.getLastGameProcessedForSeasonId(a)}).then(function(e){var a=i.find(r,function(a){return a.gameId===e.gameId});return c.game.set(a)})};return c.initialize=function(){return a(function(t,s){var n=[];c.season.isNotSet()?n.push(m()):(e.debug("criteriaService.initialize() season already set"),o.emitEvent(o.events().seasonSet)),c.game.isNotSet()||(e.debug("criteriaService.initialize() game already set"),o.emitEvent(o.events().gameSet)),c.seasonType.isNotSet()||(e.debug("criteriaService.initialize() seasonType already set"),o.emitEvent(o.events().seasonTypeSet)),a.all(n)["finally"](function(e){return t(e)},function(a){return e.error("Error while trying to criteriaService.initialize()",a),s(a)})})},c.season={isNotSet:function(){return"not set"===p.season?!0:!1},get:function(){return p.season},set:function(e){return a(function(a){return p.season!==e?(p.season=e,o.emitEvent(o.events().seasonSet),y(e.seasonId).then(function(){return a(p.season)})):a(p.season)})},setById:function(e){return a(function(a){if(p.season.seasonId!==e){var t=i.find(n,function(a){return a.seasonId===e});return c.season.set(t)}return a(p.season)})},data:function(){return n?n.reverse():n}},c.seasonType={isNotSet:function(){return"not set"===p.seasonType?!0:!1},get:function(){return p.seasonType},set:function(e){return a(function(a){return p.seasonType!==e&&(p.seasonType=e,o.emitEvent(o.events().seasonTypeSet)),a(p.seasonType)})},data:function(){return l}},c.game={isNotSet:function(){return"not set"===p.game?!0:!1},get:function(){return p.game},set:function(e){return a(function(a){return p.game!==e?(p.game=e,o.emitEvent(o.events().gameSet),u(e.playoffs,e.seasonId).then(function(){return a(p.game)})):a(p.game)})},setById:function(e){return a(function(a){if(p.game.gameId!==e){var t=i.find(r,function(a){return a.gameId===e});return c.game.set(t)}return a(p.game)})},data:function(){return r?r.reverse():r}},c}),lo30NgApp.filter("filterize",function(e){var a=function(a){var t=[],s=a.split(",");return angular.forEach(s,function(a){var s=a.split(":");if(0!==s.length&&s[1]){var o,n=s[0].replace(/(^\s+|\s+$)/g,""),r=s[1].toLowerCase();switch(n.toLowerCase()){case"rank":o="ranking";break;case"team":o=e.is("xs, sm")?"teamCode":"teamNameShort";break;case"player":o="player";break;case"pos":case"position":o="position";break;case"line":o="line";break;case"sub":o="sub"}t.push({key:o,value:r})}else t.push({key:"TEXTONLY",value:s})}),t};return function(e,t){if(!t)return e;var s=a(t),o=[];return angular.forEach(e,function(e){var a=[];angular.forEach(s,function(t){if("TEXTONLY"===t.key)-1!==JSON.stringify(e).toLowerCase().indexOf(t.value)&&a.push(e);else{var s=e[t.key];s&&("string"!=typeof s&&(s=JSON.stringify(s)),-1!==s.toLowerCase().indexOf(t.value)&&a.push(e))}}),a.length===s.length&&o.push(e)}),o}}),lo30NgApp.controller("galleryTeamsController",function(e,a,t,s,o,n,r,l,i,c,p,m){a.Lightbox=i;l._;a.initializeScopeVariables=function(){a.local={teams:[],fetchTeamsCompleted:!1,criteriaSeasonId:-1,criteriaSeasonTypeId:-1},a.images=[]},a.fetchTeams=function(e){a.local.fetchTeamsCompleted=!1,a.local.teams=[],n.teams.listForSeasonId(e).then(function(e){a.local.teams=e,a.buildImages()})["finally"](function(){a.local.fetchTeamsCompleted=!0})};var u=function(e){var a=e.replace(/ /g,"");return a=a.replace(/&/g,""),a=a.replace(/\//g,""),a=a.replace(/\./g,""),a=a.replace(/'/g,"")};a.buildImages=function(){a.images=a.local.teams.map(function(e){var a,t=u(e.seasonName),s=u(e.teamNameLong),o="img/teams/"+t+"/"+s+".png",n="img/teams/"+t+"/"+s+"_tn.png",l={url:o,thumbUrl:n};return a=r.is("xs, sm")?e.teamCode:r.is("md")?e.teamNameShort:e.teamNameLong,l.caption=e.seasonName+" "+a,l.thumbCaption=a,l}),e.debug("images",a.images)},a.openLightboxModal=function(e){i.openModal(a.images,e)},a.setWatches=function(){a.$on(p.events().seasonSet,function(){a.fetchData()}),a.$on(p.events().seasonTypeSet,function(){a.fetchData()})},a.setReturnUrlForCriteriaSelector=function(){var e=t.href(t.current.name,t.params,{absolute:!1});m.set(e)},a.activate=function(){a.initializeScopeVariables(),a.setWatches(),a.setReturnUrlForCriteriaSelector(),a.local.criteriaSeasonId=parseInt($routeParams.seasonId,10),a.local.criteriaSeasonTypeId=parseInt($routeParams.seasonTypeId,10),a.fetchTeams(a.local.selectedSeasonId)},a.activate()}),lo30NgApp.controller("gameBoxScoreController",function(e,a,t,s,o,n){t._;e.initializeScopeVariables=function(){e.local={selectedGameId:3480,selectedSeasonId:56}},e.setWatches=function(){},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});n.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),a.params.gameId&&(e.local.selectedGameId=parseInt(a.params.gameId,10))},e.activate()}),lo30NgApp.controller("loginModalController",function(e,a){this.cancel=e.$dismiss,this.submit=function(t,s){a.login(t,s).then(function(a){e.$close(a)})}}),lo30NgApp.controller("playersController",function(e,a,t,s,o,n,r,l,i){var c=n._;e.initializeScopeVariables=function(){e.local={selectedPlayerId:593,selectedSeasonId:56,selectedPlayerType:"skater",playerStatGames:[],playerStatTeams:[],playerStatSeasons:[],playerStatCareer:{},playerStatGamesToDisplay:[],playerStatTeamsToDisplay:[],playerStatSeasonsToDisplay:[],playerStatCareerToDisplay:[],fetchplayerStatGamesCompleted:!1,fetchPlayerStatTeamsCompleted:!1,fetchplayerStatSeasonsCompleted:!1,fetchplayerStatCareerCompleted:!1,tabActiveIndex:-1,tabStates:{career:0,season:1,profile:2}}},e.sortAscOnly=function(a){e.sortOn=a,e.sortDirection=!1},e.sortDescOnly=function(a){e.sortOn=a,e.sortDirection=!0},e.sortAscFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!1)},e.sortDescFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!0)},e.sortClass=function(a,t){var s="";return e.sortOn===a&&(s=e.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),s},e.fetchPlayerStatCareer=function(a,t){e.local.fetchplayerStatCareerCompleted=!1,e.local.playerStatCareer={};var o="playerStatCareers";"goalie"===t&&(o="goalieStatCareers"),s[o].getForPlayerId(a).then(function(a){e.local.playerStatCareer=a,e.buildPlayerStatCareerToDisplay()})["finally"](function(){e.local.fetchplayerStatCareerCompleted=!0})},e.fetchPlayerStatSeasons=function(a,t){e.local.fetchPlayerStatSeasonsCompleted=!1,e.local.playerStatSeasons=[];var o="playerStatSeasons";"goalie"===t&&(o="goalieStatSeasons"),s[o].listForPlayerId(a).then(function(a){e.local.playerStatSeasons=c.sortBy(a,function(e){return e.seasonName}),e.buildPlayerStatSeasonsToDisplay()})["finally"](function(){e.local.fetchPlayerStatSeasonsCompleted=!0})},e.fetchPlayerStatTeams=function(a,t,o){e.local.fetchPlayerStatTeamsCompleted=!1,e.local.playerStatTeams=[];var n="playerStatTeams";"goalie"===o&&(n="goalieStatTeams"),s[n].listForPlayerIdSeasonId(a,t).then(function(a){e.local.playerStatTeams=c.sortBy(a,function(e){return e.sub}),e.buildPlayerStatTeamsToDisplay()})["finally"](function(){e.local.fetchPlayerStatTeamsCompleted=!0})},e.fetchPlayerStatGames=function(a,t,o){e.local.fetchPlayerStatGamesCompleted=!1,e.local.playerStatGames=[];var n="playerStatGames";"goalie"===o&&(n="goalieStatGames"),s[n].listForPlayerIdSeasonId(a,t).then(function(a){e.local.playerStatGames=c.sortBy(a,function(e){return-1*e.gameId}),e.buildPlayerStatGamesToDisplay()})["finally"](function(){e.local.fetchPlayerStatGamesCompleted=!0})},e.buildPlayerStatCareerToDisplay=function(){e.local.playerStatCareerToDisplay=e.local.playerStatCareer;var a=e.local.playerStatCareerToDisplay;o.is("xs, sm")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):o.is("md")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix))},e.buildPlayerStatSeasonsToDisplay=function(){e.local.playerStatSeasonsToDisplay=e.local.playerStatSeasons.map(function(e,a){return e.rank=a+1,o.is("xs, sm")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):o.is("md")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e})},e.buildPlayerStatTeamsToDisplay=function(){e.local.playerStatTeamsToDisplay=e.local.playerStatTeams.map(function(e,a){return e.rank=a+1,o.is("xs, sm")?(e.teamNameToDisplay=e.teamNameCode,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):o.is("md")?(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e})},e.buildPlayerStatGamesToDisplay=function(){e.local.playerStatGamesToDisplay=e.local.playerStatGames.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=o.is("xs, sm")?e.teamNameCode:o.is("md")?e.teamNameShort:e.teamNameShort,e})},e.fetchData=function(){{var t=r.seasonId.get();r.seasonTypeId.get()}switch(e.local.tabActiveIndex){case e.local.tabStates.career:e.fetchPlayerStatCareer(e.local.selectedPlayerId,e.local.selectedPlayerType),e.fetchPlayerStatSeasons(e.local.selectedPlayerId,e.local.selectedPlayerType),a.params.tab="career";break;case e.local.tabStates.season:e.fetchPlayerStatTeams(e.local.selectedPlayerId,t,e.local.selectedPlayerType),e.fetchPlayerStatGames(e.local.selectedPlayerId,t,e.local.selectedPlayerType),a.params.tab="season";break;default:$log.debug("tabActiveIndex not mapped for: ",newVal)}},e.setWatches=function(){e.$watch("local.tabActiveIndex",function(a,t){a>-1&&a!==t&&e.fetchData()}),e.$on(l.events().seasonSet,function(){e.fetchData()}),e.$on(l.events().seasonTypeSet,function(){e.fetchData()})},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});i.set(e)},e.activate=function(){e.initializeScopeVariables(),e.local.tabActiveIndex=-1,e.setWatches(),e.setReturnUrlForCriteriaSelector(),a.params.playerId&&(e.local.selectedPlayerId=parseInt(a.params.playerId,10)),a.params.playerType&&(e.local.selectedPlayerType=a.params.playerType),a.params.tab?t(function(){e.local.tabActiveIndex=e.local.tabStates[a.params.tab]},100):t(function(){e.local.tabActiveIndex=e.local.tabStates.season},100)},e.activate()}),angular.module("lo30NgApp").factory("returnUrlService",function(e,a){var t={};return t.set=function(e){var t={apiDataType:"returnUrl.set",urlPartial:"returnurl",method:"POST",params:{returnUrl:e}};return a.execute(t)},t}),lo30NgApp.controller("rootController",function(e,a,t,s,o,n,r,l){r._;e.initializeScopeVariables=function(){e.local={screenSizeIsDesktop:!1,screenSizeIsTablet:!1,screenSizeIsMobile:!1,sidebarIsCollapsed:!1,showNavSideBar:!0}},e.setWatches=function(){},e.setNavToSideMenu=function(){o[0].querySelector("#contentWrapper")},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});l.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),e.local.screenSizeIsDesktop=n.is("lg"),e.local.screenSizeIsTablet=n.is("md"),e.local.screenSizeIsMobile=n.is("xs, sm"),e.local.screenSizeIsMobile?(e.local.sidebarIsCollapsed=!0,e.local.showNavSideBar=!1):e.local.screenSizeIsTablet?(e.local.sidebarIsCollapsed=!0,e.local.showNavSideBar=!1):(e.local.sidebarIsCollapsed=!1,e.local.showNavSideBar=!1)},e.activate()}),lo30NgApp.controller("standingsController",function(e,a,t,s,o,n,r,l,i,c){a.initializeScopeVariables=function(){a.local={teamStandings:[],teamStandingsByDiv:[],teamStandingsToDisplay:[],fetchTeamStandingsCompleted:!1,criteriaSeasonId:-1,criteriaSeasonTypeId:-1}},a.sortAscOnly=function(e){a.sortOn=e,a.sortDirection=!1},a.sortDescOnly=function(e){a.sortOn=e,a.sortDirection=!0},a.sortAscFirst=function(e){a.sortOn===e?a.sortDirection=!a.sortDirection:(a.sortOn=e,a.sortDirection=!1)},a.sortDescFirst=function(e){a.sortOn===e?a.sortDirection=!a.sortDirection:(a.sortOn=e,a.sortDirection=!0)},a.sortClass=function(e,t){var s="";return a.sortOn===e&&(s=a.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),s},a.fetchTeamStandings=function(e,t){a.local.fetchTeamStandingsCompleted=!1,a.local.teamStandings=[],a.local.teamStandingsByDiv=[],n.teamStandings.listForSeasonIdSeasonTypeId(e,t).then(function(e){a.local.teamStandings=e,a.buildTeamStandingsToDisplay(a.local.teamStandings),a.parseTeamStandingsIntoDivisions(a.local.teamStandingsToDisplay)})["finally"](function(){a.local.fetchTeamStandingsCompleted=!0})},a.parseTeamStandingsIntoDivisions=function(t){var s=_.pluck(t,"divisionLongName"),o=_.uniq(s);o.forEach(function(e){var s=_.filter(t,function(a){return a.divisionLongName===e});a.local.teamStandingsByDiv.push({division:e,teamStandings:s})}),e.debug("teamStandingsByDiv",a.local.teamStandingsByDiv)},a.buildTeamStandingsToDisplay=function(t){a.local.teamStandingsToDisplay=t.map(function(e){return e.teamNameToDisplay=r.is("xs, sm")?e.teamCode:r.is("md")?e.teamNameShort:e.teamNameLong,e}),e.debug("teamStandingsToDisplay",a.local.teamStandingsToDisplay)},a.fetchData=function(){var e=l.seasonId.get(),t=l.seasonTypeId.get();a.fetchTeamStandings(e,t)},a.setWatches=function(){a.$on(i.events().seasonSet,function(){a.fetchData()}),a.$on(i.events().seasonTypeSet,function(){a.fetchData()})},a.setReturnUrlForCriteriaSelector=function(){var e=s.href(s.current.name,s.params,{absolute:!1});c.set(e)},a.activate=function(){a.initializeScopeVariables(),a.setWatches(),a.setReturnUrlForCriteriaSelector(),a.fetchData(),t(function(){a.sortAscFirst("ranking")},0)},a.activate()}),lo30NgApp.controller("statsPlayersController",function(e,a,t,s,o,n,r,l,i,c){var p=r._;e.initializeScopeVariables=function(){e.positions=["F","D","G"],e.subs=["With","Without"],e.lines=["1","2","3"],e.local={screenSizeIsDesktop:!1,screenSizeIsTablet:!1,screenSizeIsMobile:!1,selectedPlayerType:"skater",playerStatTeams:[],playerStatTeamsToDisplay:[],teams:[],fetchPlayerStatTeamsCompleted:!1,fetchTeamsCompleted:!1,searchText:null,selectedTeam:null,selectedPosition:null,selectedLine:null,selectedSub:null,criteriaSeasonId:-1,criteriaSeasonTypeId:-1}},e.filterByTeam=function(a){var t;t=e.local.screenSizeIsMobile?a.teamCode:e.local.screenSizeIsTablet?a.teamNameShort:a.teamNameShort;var s="team:"+e.local.selectedTeam,o="team:"+t;e.local.selectedTeam&&e.removeExistingSearchFromSearch(s),e.local.selectedTeam===t?e.local.selectedTeam=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(o),e.local.selectedTeam=t)},e.filterBySub=function(a){var t="sub:"+e.filterBySubMapper(e.local.selectedSub),s="sub:"+e.filterBySubMapper(a);e.local.selectedSub&&e.removeExistingSearchFromSearch(t),e.local.selectedSub===a?e.local.selectedSub=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(s),e.local.selectedSub=a),e.resetSort()},e.filterBySubMapper=function(e){var a;switch(e){case"With":a="Y";break;case"Without":a="N";break;default:a=e}return a},e.filterByLine=function(a){var t="line:"+e.local.selectedLine,s="line:"+a;e.local.selectedLine&&e.removeExistingSearchFromSearch(t),e.local.selectedLine===a?e.local.selectedLine=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(s),e.local.selectedLine=a),e.resetSort()},e.filterByPosition=function(a){var t="pos:"+e.local.selectedPosition,s="pos:"+a;e.local.selectedPosition&&e.removeExistingSearchFromSearch(t),e.local.selectedPosition===a?e.local.selectedPosition=null:(e.prepSearchForNewSearch(),e.addNewSearchToSearch(s),e.local.selectedPosition=a),e.resetSort()},e.resetSort=function(e){},e.addNewSearchToSearch=function(a){e.local.searchText=e.local.searchText+a},e.removeExistingSearchFromSearch=function(a){e.local.searchText=e.local.searchText.replace(", "+a,""),e.local.searchText=e.local.searchText.replace(a+", ",""),e.local.searchText=e.local.searchText.replace(a,"")},e.prepSearchForNewSearch=function(){e.local.searchText=e.local.searchText?e.local.searchText+", ":""},e.sortAscOnly=function(a){e.sortOn=a,e.sortDirection=!1},e.sortDescOnly=function(a){e.sortOn=a,e.sortDirection=!0},e.sortAscFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!1)},e.sortDescFirst=function(a){e.sortOn===a?e.sortDirection=!e.sortDirection:(e.sortOn=a,e.sortDirection=!0)},e.sortClass=function(a,t){var s="";return e.sortOn===a&&(s=e.sortDirection===!0?"fa fa-sort-desc":"fa fa-sort-asc"),s},e.removeSearch=function(){e.local.searchText=null,e.local.selectedTeam=null,e.local.selectedPosition=null,e.local.selectedLine=null,e.local.selectedSub=null},e.fetchPlayerStatTeams=function(a,t){e.local.fetchPlayerStatTeamsCompleted=!1,e.local.playerStatTeams=[];var s="playerStatTeams";"goalie"===e.local.selectedPlayerType&&(s="goalieStatTeams"),o[s].listForSeasonIdSeasonTypeId(a,t).then(function(a){e.local.playerStatTeams=p.sortBy(a,function(e){return-1*e.points}),e.buildPlayerStatTeamsToDisplay()})["finally"](function(){e.local.fetchPlayerStatTeamsCompleted=!0})},e.buildPlayerStatTeamsToDisplay=function(){e.local.playerStatTeamsToDisplay=e.local.playerStatTeams.map(function(a,t){return a.sub=a.sub?"Y":"N",a.rank=t+1,e.local.screenSizeIsMobile?(a.teamNameToDisplay=a.teamCode,a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):e.local.screenSizeIsTablet?(a.teamNameToDisplay=a.teamNameShort,a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.teamNameToDisplay=a.teamNameShort,a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)),a})},e.fetchTeams=function(a){e.local.fetchTeamsCompleted=!1,e.local.teams=[],o.teams.listForSeasonId(a).then(function(a){e.local.teams=a,angular.forEach(a,function(a,t){e.buildTeamsToDisplay()})})["finally"](function(){e.local.fetchScoreSheetEntryGoalsCompleted=!0})},e.buildTeamsToDisplay=function(){e.local.teamsToDisplay=e.local.teams.map(function(a,t){return a.rank=t+1,a.teamNameToDisplay=e.local.screenSizeIsMobile?a.teamCode:e.local.screenSizeIsTablet?a.teamNameShort:a.teamNameShort,a})},e.fetchData=function(){var a=l.seasonId.get(),t=l.seasonTypeId.get();e.fetchTeams(a),e.fetchPlayerStatTeams(a,t)},e.setWatches=function(){e.$on(i.events().seasonSet,function(){e.fetchData()}),e.$on(i.events().seasonTypeSet,function(){e.fetchData()})},e.setReturnUrlForCriteriaSelector=function(){var e=a.href(a.current.name,a.params,{absolute:!1});c.set(e)},e.activate=function(){e.initializeScopeVariables(),e.setWatches(),e.setReturnUrlForCriteriaSelector(),e.local.screenSizeIsDesktop=n.is("lg"),e.local.screenSizeIsTablet=n.is("md"),e.local.screenSizeIsMobile=n.is("xs, sm"),t.playerType&&(e.local.selectedPlayerType=t.playerType),e.fetchData(),s(function(){"skater"===e.local.selectedPlayerType?e.sortDescFirst("points"):e.sortAscFirst("goalsAgainstAverage"),e.filterBySub("Without")},0)},e.activate()}),lo30NgApp.controller("teamsController",function(e,a,t,s,o,n,r,l,i,c,p){var m=r._;a.initializeScopeVariables=function(){a.local={selectedTeamId:318,selectedTeam:"not set",teamStandings:[],teamStandingsToDisplay:[],games:[],gamesToDisplay:[],gamesToDisplayCompleted:[],gamesToDisplayUpcoming:[],teamFeed:{},fetchTeamStandingsCompleted:!1,fetchGamesCompleted:!1,tabActiveIndex:-1,tabStates:{completed:0,upcoming:1,schedule:2}}},a.fetchTeamStandings=function(e,t){a.local.fetchTeamStandingsCompleted=!1,a.local.teamStandings=[],o.teamStandings.listForSeasonIdTeamId(e,t).then(function(e){a.local.teamStandings=e,a.buildTeamStandingsToDisplay(),a.buildTeamFeed()})["finally"](function(){
a.local.fetchTeamStandingsCompleted=!0})},a.buildTeamStandingsToDisplay=function(){a.local.teamStandingsToDisplay=a.local.teamStandings.map(function(e){return a.selectedTeamName=e.teamNameLong,e.teamNameToDisplay=n.is("xs, sm")?e.teamCode:n.is("md")?e.teamNameShort:e.teamNameLong,e}),e.debug("teamStandingsToDisplay",a.local.teamStandingsToDisplay)},a.buildTeamFeed=function(){var t=a.local.teamStandings[0],s=t.seasonId,o=t.teamId,n=t.teamNameLong.replace(/ /g,"").replace(/\//g,"").replace(/-/g,"").replace(/\./g,""),r=t.seasonName.replace(/ /g,"");a.local.teamFeed={teamCode:t.teamCode,teamNameLong:t.teamNameLong,teamNameShort:t.teamNameShort,teamFeedUrl:l+"/Schedule/TeamFeed/Seasons/"+s+"/Teams/"+o+"/LO30Schedule-"+n+"-"+r},e.debug("teamFeed",a.local.teamFeed)},a.fetchGames=function(e,t){a.local.fetchGamesCompleted=!1,a.local.games=[],o.games.listForSeasonIdTeamId(e,t).then(function(e){a.local.games=e,a.buildGamesToDisplay()})["finally"](function(){a.local.fetchGamesCompleted=!0})},a.buildGamesToDisplay=function(){a.local.gamesToDisplay=a.local.games.map(function(e,t){return e.outcomeToDisplay=e.outcomeAway,e.teamIdHome===a.local.selectedTeamId&&(e.outcomeToDisplay=e.outcomeHome),e.overridenAway&&(e.outcomeToDisplay=e.outcomeToDisplay+"*"),n.is("xs, sm")?(e.awayTeamToDisplay=e.teamCodeAway,e.homeTeamToDisplay=e.teamCodeHome):n.is("md")?(e.awayTeamToDisplay=e.teamNameShortAway,e.homeTeamToDisplay=e.teamNameShortHome):(e.awayTeamToDisplay=e.teamNameLongAway,e.homeTeamToDisplay=e.teamNameLongHome),e}),a.local.gamesToDisplayCompleted=m.filter(a.local.gamesToDisplay,function(e){return null!==e.outcomeHome}),a.local.gamesToDisplayCompleted=m.sortBy(a.local.gamesToDisplayCompleted,function(e){return-1*e.gameId}),a.local.gamesToDisplayUpcoming=m.filter(a.local.gamesToDisplay,function(e){return null===e.outcomeHome}),a.local.gamesToDisplayUpcoming=m.sortBy(a.local.gamesToDisplayUpcoming,function(e){return e.gameId})},a.fetchData=function(){{var e=i.seasonId.get();i.seasonTypeId.get()}t.params.teamId&&(a.local.selectedTeamId=parseInt(t.params.teamId,10)),a.fetchTeamStandings(e,a.local.selectedTeamId),a.fetchGames(e,a.local.selectedTeamId)},a.setWatches=function(){a.$on(c.events().seasonSet,function(){a.fetchData()}),a.$on(c.events().seasonTypeSet,function(){a.fetchData()})},a.setReturnUrlForCriteriaSelector=function(){var e=t.href(t.current.name,t.params,{absolute:!1});p.set(e)},a.activate=function(){a.initializeScopeVariables(),a.setReturnUrlForCriteriaSelector(),t.params.tab?s(function(){a.local.tabActiveIndex=a.local.tabStates[t.params.tab]},100):s(function(){a.local.tabActiveIndex=a.local.tabStates.completed},100),a.fetchData()},a.activate()}),angular.module("lo30NgApp").controller("profilesPlayersController",function(e,a,t,s,o,n,r,l,i,c,p,m,u,y){var d=c._,f=(c.sjv,this),S={},T={career:0,season:1,profile:2},h=[!1,!1,!1],g=function(){f.dtOptions={playerCareer:m.newOptions(),playerSeasons:m.newOptions(),playerTeams:m.newOptions(),playerGames:m.newOptions()},f.dtColumns={playerCareer:[u.newColumn("playerNameToDisplay").withTitle("Player"),u.newColumn("seasons").withTitle("Seasons"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")],playerSeasons:[u.newColumn("seasonName").withTitle("Season"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")],playerTeams:[u.newColumn("playerNameToDisplay").withTitle("Player"),u.newColumn("teamNameToDisplay").withTitle("Team"),u.newColumn("playoffs").withTitle("Playoffs"),u.newColumn("games").withTitle("Games"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")],playerGames:[u.newColumn("gameId").withTitle("Game"),u.newColumn("gameDateTime").withTitle("Date"),u.newColumn("teamCode").withTitle("Team"),u.newColumn("playoffs").withTitle("Playoffs"),u.newColumn("goals").withTitle("Goals"),u.newColumn("assists").withTitle("Assists"),u.newColumn("points").withTitle("Points"),u.newColumn("penaltyMinutes").withTitle("PIM"),u.newColumn("powerPlayGoals").withTitle("PPG"),u.newColumn("shortHandedGoals").withTitle("SHG"),u.newColumn("gameWinningGoals").withTitle("GWG")]},f.dtInstance={playerCareer:{},playerSeasons:{},playerTeams:{},playerGames:{}}},N=function(){var e=m.fromFnPromise(function(){return S.career.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap(),a=m.fromFnPromise(function(){return S.seasons.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap(),t=m.fromFnPromise(function(){return S.teams.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap(),s=m.fromFnPromise(function(){return S.games.promise}).withOption("processing",!1).withOption("paging",!1).withOption("bFilter",!1).withOption("bInfo",!1).withOption("searching",!1).withOption("scrollX",!0).withBootstrap();f.dtOptions={playerCareer:e,playerSeasons:a,playerTeams:t,playerGames:s}},v=function(e,a){f.careerDataLoaded=!1,f.playerStatCareer={};var t="playerStatCareers";"goalie"===a&&(t="goalieStatCareers"),l[t].getForPlayerId(e).then(function(e){f.playerStatCareer=e,f.playerStatCareer=C(f.playerStatCareer)})["finally"](function(){var e=[];e.push(f.playerStatCareer),S.career.resolve(e),f.careerDataLoaded=!0})},I=function(e,a){f.seasonsDataLoaded=!1,f.playerStatSeasons=[];var t="playerStatSeasons";"goalie"===a&&(t="goalieStatSeasons"),l[t].listForPlayerId(e).then(function(e){f.playerStatSeasons=d.sortBy(e,function(e){return e.seasonName}),f.playerStatSeasons=w(f.playerStatSeasons)})["finally"](function(){S.seasons.resolve(f.playerStatSeasons),f.seasonsDataLoaded=!0})},D=function(e,a,t){f.teamsDataLoaded=!1,f.playerStatTeams=[];var s="playerStatTeams";"goalie"===t&&(s="goalieStatTeams"),l[s].listForPlayerIdSeasonId(e,a).then(function(e){f.playerStatTeams=d.sortBy(e,function(e){return e.sub}),f.playerStatTeams=P(f.playerStatTeams)})["finally"](function(){S.teams.resolve(f.playerStatTeams),f.teamsDataLoaded=!0})},b=function(e,a,t){f.gamesDataLoaded=!1,f.playerStatGames=[];var s="playerStatGames";"goalie"===t&&(s="goalieStatGames"),l[s].listForPlayerIdSeasonId(e,a).then(function(e){f.playerStatGames=d.sortBy(e,function(e){return-1*e.gameId}),f.playerStatGames=x(f.playerStatGames)})["finally"](function(){S.games.resolve(f.playerStatGames),f.gamesDataLoaded=!0})},C=function(e){var a=e;return i.is("xs, sm")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):i.is("md")?(a.playerNameToDisplay=a.playerFirstName+"<br/>"+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)):(a.playerNameToDisplay=a.playerFirstName+" "+a.playerLastName,a.playerSuffix&&(a.playerNameToDisplay=a.playerNameToDisplay+" "+a.playerSuffix)),a},w=function(e){var a=e.map(function(e,a){return e.rank=a+1,i.is("xs, sm")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):i.is("md")?(e.playerNameToDisplay=e.playerFirstName+"/n"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},P=function(e){var a=e.map(function(e,a){return e.rank=a+1,i.is("xs, sm")?(e.teamNameToDisplay=e.teamNameCode,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):i.is("md")?(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+"<br/>"+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},x=function(e){var a=e.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=i.is("xs, sm")?e.teamNameCode:i.is("md")?e.teamNameShort:e.teamNameShort,e});return a},G=function(s,o,n,r){switch(a.tabActiveIndex){case T.career:v(n,r),I(n,r),t.params.tab="career";break;case T.season:D(n,s,r),b(n,s,r),t.params.tab="season";break;default:e.debug("tabActiveIndex not mapped for: ",a.tabActiveIndex)}},F=function(){a.$on(p.events().seasonSet,function(){var e=r.seasons.get();f.seasonId=e.seasonId,G(f.seasonId,f.seasonTypeId,f.playerType,!1)}),a.$on(p.events().seasonTypeSet,function(){var e=r.seasonTypes.get();f.seasonTypeId=e.seasonTypeId,G(f.seasonId,f.seasonTypeId,f.playerType,!1)}),a.$watch("tabActiveIndex",function(e,a){e>-1&&e!==a&&(h[e]||(G(f.seasonId,f.seasonTypeId,f.playerId,f.playerType),h[e]=!0))}),a.$watch(function(){return t.params.playerType},function(e){f.playerType=e})};f.$onInit=function(){f.careerDataLoaded=!1,a.tabActiveIndex=-1,S={career:o.defer(),seasons:o.defer(),teams:o.defer(),games:o.defer()};var e=r.seasons.get();f.seasonId=e.seasonId;var n=r.seasonTypes.get();f.seasonTypeId=n.seasonTypeId,f.playerId=t.params.playerId,f.playerType=t.params.playerType,t.params.tab?s(function(){a.tabActiveIndex=T[t.params.tab]},200):s(function(){a.tabActiveIndex=T.season},200),g(),s(function(){F(),N()},100)}}),angular.module("lo30NgApp").factory("apiBaseService",function(e,a){var t="/api/",s={};return s.execute=function(s){var o=s.apiDataType,n=s.urlPartial,r=s.method,l=s.params,i=t+n,c={url:i,method:r};return"GET"===r?c.params=JSON.parse(JSON.stringify(l)):c.data=JSON.parse(JSON.stringify(l)),a(c).then(function(a){return e.debug(o,a),a.data})["catch"](function(a){throw e.error(o,a),a})},s}),angular.module("lo30NgApp").factory("apiService",function(e,a){var t=e._,s={dataProcessing:{},games:{},goalieStatCareers:{},goalieStatGames:{},goalieStatSeasons:{},goalieStatTeams:{},playerStatCareers:{},playerStatGames:{},playerStatSeasons:{},playerStatTeams:{},scoreSheetEntryProcessedGoals:{},scoreSheetEntryProcessedPenalties:{},seasons:{},teams:{},teamStandings:{}};return s.dataProcessing.getLastGameProcessedForSeasonId=function(e){var t={apiDataType:"dataProcessing.getLastGameProcessedForSeasonId",urlPartial:"dataprocessing/lastprocessedgameid/seasons/"+e,method:"GET",params:null};return a.execute(t)},s.games.getForGameId=function(e){var t={apiDataType:"games.getForGameId",urlPartial:"games/"+e,method:"GET",params:null};return a.execute(t)},s.games.listForSeasonIdTeamId=function(e,t){var s={apiDataType:"games.listForSeasonIdTeamId",urlPartial:"games/seasons/"+e+"/teams/"+t,method:"GET",params:null};return a.execute(s)},s.games.listForSeasonId=function(e){var t={apiDataType:"games.listForSeasonId",urlPartial:"games/seasons/"+e,method:"GET",params:null};return a.execute(t)},s.goalieStatCareers.list=function(e){var t={apiDataType:"goalieStatCareers.list",urlPartial:"goaliestatcareers",method:"GET",params:null};return a.execute(t)},s.goalieStatCareers.getForPlayerId=function(e){var t={apiDataType:"goalieStatCareers.getForPlayerId",urlPartial:"goaliestatcareers/players/"+e,method:"GET",params:null};return a.execute(t)},s.goalieStatSeasons.listForPlayerId=function(e){var t={apiDataType:"goalieStatSeasons.listForPlayerId",urlPartial:"goaliestatseasons/players/"+e,method:"GET",params:null};return a.execute(t)},s.goalieStatSeasons.listForPlayerIdSeasonId=function(e,t){var s={apiDataType:"goalieStatSeasons.listForPlayerId",urlPartial:"goaliestatseasons/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(s)},s.goalieStatTeams.listForSeasonIdSeasonTypeId=function(e,t){var s={apiDataType:"goalieStatTeams.listForSeasonIdSeasonTypeId",urlPartial:"goaliestatteams/seasons/"+e+"/seasonTypes/"+t,method:"GET",params:null};return a.execute(s)},s.goalieStatTeams.listForPlayerIdSeasonId=function(e,t){var s={apiDataType:"goalieStatTeams.listForSeasonIdPlayerId",urlPartial:"goaliestatteams/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(s)},s.goalieStatGames.listForGameId=function(e){var t={apiDataType:"goalieStatGames.listForGameId",urlPartial:"goaliestatgames/games/"+e,method:"GET",params:null};return a.execute(t)},s.goalieStatGames.listForPlayerIdSeasonId=function(e,t){var s={apiDataType:"goalieStatGames.listForSeasonIdPlayerId",urlPartial:"goaliestatgames/goalies/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(s)},s.playerStatCareers.list=function(){var e={apiDataType:"playerStatCareers.list",urlPartial:"playerstatcareers",method:"GET",params:null};return a.execute(e)},s.playerStatCareers.getForPlayerId=function(e){var t={apiDataType:"playerStatCareers.getForPlayerId",urlPartial:"playerstatcareers/players/"+e,method:"GET",params:null};return a.execute(t)},s.playerStatGames.listForPlayerIdSeasonId=function(e,t){var s={apiDataType:"playerStatGames.listForSeasonIdPlayerId",urlPartial:"playerstatgames/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(s)},s.playerStatSeasons.listForPlayerId=function(e){var t={apiDataType:"playerStatSeasons.listForPlayerId",urlPartial:"playerstatseasons/players/"+e,method:"GET",params:null};return a.execute(t)},s.playerStatSeasons.listForPlayerIdSeasonId=function(e,t){var s={apiDataType:"playerStatSeasons.listForPlayerId",urlPartial:"playerstatseasons/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(s)},s.playerStatTeams.listForSeasonIdSeasonTypeId=function(e,t){var s={apiDataType:"playerStatTeams.listForSeasonIdSeasonTypeId",urlPartial:"playerstatteams/seasons/"+e+"/seasonTypes/"+t+"?key=1",method:"GET",params:null};return a.execute(s)},s.playerStatTeams.filterListForSeasonIdSeasonTypeId=function(e,t,s){var o={apiDataType:"playerStatTeams.listForSeasonIdSeasonTypeId",urlPartial:"playerstatteams/seasons/"+e+"/seasonTypes/"+t+"?"+s,method:"GET",params:null};return a.execute(o)},s.playerStatTeams.listForPlayerIdSeasonId=function(e,t){var s={apiDataType:"playerStatTeams.listForSeasonIdPlayerId",urlPartial:"playerstatteams/players/"+e+"/seasons/"+t,method:"GET",params:null};return a.execute(s)},s.scoreSheetEntryProcessedGoals.listForGameId=function(e){var t={apiDataType:"scoreSheetEntryProcessedGoals.listForGameId",urlPartial:"scoresheetentries/processed/goals/games/"+e,method:"GET",params:null};return a.execute(t)},s.scoreSheetEntryProcessedPenalties.listForGameId=function(e){var t={apiDataType:"scoreSheetEntryProcessedPenalties.listForGameId",urlPartial:"scoresheetentries/processed/penalties/games/"+e,method:"GET",params:null};return a.execute(t)},s.seasons.list=function(){var e={apiDataType:"seasons.list",urlPartial:"seasons",method:"GET",params:null};return a.execute(e).then(function(e){return t.reject(e,function(e){return-1===e.seasonId})})},s.seasons.listForSeasonsWithGameSelection=function(){var e={apiDataType:"seasons.list",urlPartial:"seasons",method:"GET",params:null};return a.execute(e).then(function(e){return t.filter(e,function(e){return e.seasonId>=43})})},s.teams.listForSeasonId=function(e){var t={apiDataType:"teams.listForSeasonId",urlPartial:"teams/seasons/"+e,method:"GET",params:null};return a.execute(t)},s.teamStandings.listForSeasonIdSeasonTypeId=function(e,t){var s={apiDataType:"teamStandings.listForSeasonIdSeasonTypeId",urlPartial:"teamstandings/seasons/"+e+"/seasonTypes/"+t,method:"GET",params:null};return a.execute(s)},s.teamStandings.listForSeasonIdTeamId=function(e,t){var s={apiDataType:"teamStandings.listForSeasonIdTeamId",urlPartial:"teamstandings/seasons/"+e+"/teams/"+t,method:"GET",params:null};return a.execute(s)},s}),angular.module("lo30NgApp").factory("broadcastService",["$log","$rootScope",function(e,a){var t={},s={seasonSet:"seasonSet",seasonTypeSet:"seasonTypeSet",gameSet:"gameSet"},o={seasonSet:0,seasonTypeSet:0,gameSet:0};return t.events=function(){return s},t.emittedEventsCount=function(e){return o[e]},t.emitEvent=function(t){s[t]?(e.debug("Broadcast service emitted event: "+t),a.$broadcast(t),o[t]=o[t]+1):e.error("emitEvent unknown event name: "+t,"broadcastService")},t}]),angular.module("lo30NgApp").factory("criteriaService",function(e,a,t,s){var o=t._,n=[{seasonId:56,seasonName:"2015 - 2016"},{seasonId:54,seasonName:"2014 - 2015"},{seasonId:53,seasonName:"2013 - 2014"},{seasonId:52,seasonName:"2012 - 2013"},{seasonId:51,seasonName:"2011 - 2012"},{seasonId:50,seasonName:"2010 - 2011"},{seasonId:49,seasonName:"2009 - 2010"},{seasonId:48,seasonName:"2008 - 2009"},{seasonId:47,seasonName:"2007 - 2008"},{seasonId:46,seasonName:"2006 - 2007"},{seasonId:45,seasonName:"2005 - 2006"},{seasonId:44,seasonName:"2004 - 2005"},{seasonId:43,seasonName:"2003 - 2004"},{seasonId:42,seasonName:"2002 - 2003"},{seasonId:41,seasonName:"2001 - 2002"},{seasonId:40,seasonName:"2000 - 2001"}],r=[{decadeId:4,decadeName:"2010-2019",seasons:[56,54,53,52,51,50]},{decadeId:3,decadeName:"2000-2009",seasons:[49,48,47,46,45,44,43,42,41,40]}],l=[{seasonTypeId:0,seasonTypeName:"Regular Season"},{seasonTypeId:1,seasonTypeName:"Playoffs"}],i=56,c=0,p={};return p.decades={get:function(){return r.map(function(e){return e.hasSelectedSeason=!1,e.seasons=e.seasons.map(function(a){var t;return t="object"==typeof a?a:o.findWhere(n,{seasonId:a}),t.seasonId===i?(t.isSelectedSeason=!0,e.hasSelectedSeason=!0):t.isSelectedSeason=!1,t}),e})}},p.seasons={get:function(){return o.findWhere(n,{seasonId:i})},set:function(e){e.seasonId!==i&&(i=e.seasonId,s.emitEvent(s.events().seasonSet))},setById:function(e){e=parseInt(e,10),e!==i&&(i=parseInt(e,10),s.emitEvent(s.events().seasonSet))}},p.seasonTypes={get:function(){return o.findWhere(l,{seasonTypeId:c})},set:function(e){e.seasonTypeId!==c&&(c=e.seasonTypeId,s.emitEvent(s.events().seasonTypeSet))},setById:function(e){e=parseInt(e,10),e!==c&&(c=e,s.emitEvent(s.events().seasonTypeSet))}},p}),angular.module("lo30NgApp").factory("externalLibService",[function(){var e=_,a=sjv,t=moment;return{_:e,sjv:a,moment:t}}]),angular.module("lo30NgApp").controller("standingsController",function(e,a,t,s,o,n){var r=o._,l=(o.sjv,this),i={paging:!1,searching:!1,order:[[0,"asc"]],info:!1,scrollX:!0,columns:[{data:"ranking",title:"Rank",className:"text-left"},{data:"teamNameToDisplay",title:"Team",className:"text-left",render:function(e,a,t){var o=t.teamNameLong;return s.is("xs, sm")?o=t.teamCode:s.is("md")&&(o=t.teamNameShort),'<a href="/Teams/SeasonBreakdown/'+t.teamId+'">'+o+"</a>"}},{data:"games",title:"Games",className:"text-center"},{data:"wins",title:"Wins",className:"text-center"},{data:"losses",title:"Losses",className:"text-center"},{data:"ties",title:"Ties",className:"text-center"},{data:"points",title:"Points",className:"text-center"},{data:"goalsFor",title:"GF",className:"text-center"},{data:"goalsAgainst",title:"GA",className:"text-center"},{data:"penaltyMinutes",title:"PIM",className:"text-center"},{data:"winPercent",title:"W%",className:"text-center",render:function(e,a,t){return Math.round(100*e)+"%"}},{data:"subs",title:"Subs",className:"text-center"},{data:"teamId",visible:!1},{data:"teamCode",visible:!1},{data:"teamNameShort",visible:!1},{data:"teamNameLong",visible:!1}]},c=function(e,a){return l.teamStandings=[],t.teamStandings.listForSeasonIdSeasonTypeId(e,a).then(function(e){l.teamStandings=m(e),l.teamStandings=p(l.teamStandings)})["finally"](function(){l.dtOptions=[],l.teamStandings.forEach(function(e,a){l.dtOptions[a]=r.clone(i),l.dtOptions[a].data=l.teamStandings[a].teamStandings})})},p=function(e){var a=r.pluck(e,"divisionLongName"),t=r.uniq(a),s=[];return t.forEach(function(a){var t=r.filter(e,function(e){return e.divisionLongName===a});s.push({division:a,teamStandings:t})}),s},m=function(e){var a=e.map(function(e){return e.teamNameToDisplay=s.is("xs, sm")?e.teamCode:s.is("md")?e.teamNameShort:e.teamNameLong,e});return a},u=function(e,a){return c(e,a)},y=function(){e.$on(n.events().seasonSet,function(){var e=a.seasons.get();l.seasonId=e.seasonId,u(l.seasonId,l.seasonTypeId)}),e.$on(n.events().seasonTypeSet,function(){var e=a.seasonTypes.get();l.seasonTypeId=e.seasonTypeId,u(l.seasonId,l.seasonTypeId)})};l.$onInit=function(){var e=a.seasons.get();l.seasonId=e.seasonId;var t=a.seasonTypes.get();l.seasonTypeId=t.seasonTypeId,u(l.seasonId,l.seasonTypeId),y()}}),angular.module("lo30NgApp").controller("statsPlayersController",function(e,a,t,s,o,n,r,l,i,c,p,m,u){var y=i._,d=(i.sjv,this);d.dtInstance={};var f=-1,S=s.defer();d.playerStatsFiltered=[],d.playerStats=[];var T=function(){d.dtOptions=p.newOptions(),d.dtColumns=[m.newColumn("rank").withTitle("Rank"),m.newColumn("playerNameToDisplay").withTitle("Player"),m.newColumn("games").withTitle("Games"),m.newColumn("goals").withTitle("Goals"),m.newColumn("assists").withTitle("Assists"),m.newColumn("points").withTitle("Points"),m.newColumn("penaltyMinutes").withTitle("PIM"),m.newColumn("powerPlayGoals").withTitle("PPG"),m.newColumn("shortHandedGoals").withTitle("SHG"),m.newColumn("gameWinningGoals").withTitle("GWG"),m.newColumn("teamNameToDisplay").withTitle("Team"),m.newColumn("position").withTitle("Position"),m.newColumn("line").withTitle("Line"),m.newColumn("sub").withTitle("Sub")]},h=function(){d.dtOptions=p.fromFnPromise(function(){return S.promise}).withOption("processing",!0).withOption("paging",!0).withOption("bFilter",!1).withOption("bInfo",!0).withOption("page-length",10).withOption("searching",!1).withOption("order",[[5,"desc"]]).withOption("scrollX",!0).withPaginationType("full_numbers").withDisplayLength(10).withBootstrap().withButtons(["colvis","copyHtml5","excelHtml5",{extend:"pdfHtml5",orientation:"landscape",pageSize:"letter"}]).withDOM("<'row'<'col-sm-4'li><'col-sm-4'f><'col-sm-4'<'html5buttons'B>><'clearfix'>><'row'<'col-sm-12'rt>><'row'<'col-sm-3 text-left'i><'col-sm-9'<'pull-right'p>>>")},g=function(e,a,t,s){d.dataLoaded=!1;var o=[],n="playerStatTeams";"goalie"===t&&(n="goalieStatTeams"),r[n].listForSeasonIdSeasonTypeId(e,a).then(function(e){o=y.sortBy(e,function(e){return-1*e.points}),o=N(o)})["finally"](function(){d.playerStats=o,d.playerStatsFiltered=x(d.playerStats,d.searchText),S.resolve(d.playerStatsFiltered),d.dataLoaded=!0})},N=function(e){var a=e.map(function(e,a){return e.sub=e.sub?"Y":"N",e.rank=a+1,l.is("xs, sm")?(e.teamNameToDisplay=e.teamCode,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):l.is("md")?(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)):(e.teamNameToDisplay=e.teamNameShort,e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerSuffix)),e});return a},v=function(e){r.teams.listForSeasonId(e).then(function(e){d.teams=I(e)})["finally"](function(){})},I=function(e){var a=e.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=l.is("xs, sm")?e.teamCode:l.is("md")?e.teamNameShort:e.teamNameShort,e});return a};e.filterByTeam=function(e){f=10;var a;a=l.is("xs, sm")?e.teamCode:l.is("md")?e.teamNameShort:e.teamNameShort;var t="team:"+d.selectedTeam,s="team:"+a;d.selectedTeam&&C(t),d.selectedTeam===a?d.selectedTeam=null:(w(),b(s),d.selectedTeam=a),d.playerStatsFiltered=x(d.playerStats,d.searchText)},e.filterBySub=function(e){var a="sub:"+D(d.selectedSub),t="sub:"+D(e);d.selectedSub&&C(a),d.selectedSub===e?d.selectedSub=null:(w(),b(t),d.selectedSub=e),d.playerStatsFiltered=x(d.playerStats,d.searchText)};var D=function(e){var a;switch(e){case"With":a="Y";break;case"Without":a="N";break;default:a=e}return a};e.filterByLine=function(e){var a="line:"+d.selectedLine,t="line:"+e;d.selectedLine&&C(a),d.selectedLine===e?d.selectedLine=null:(w(),b(t),d.selectedLine=e),d.playerStatsFiltered=x(d.playerStats,d.searchText)},e.filterByPosition=function(e){var a="pos:"+d.selectedPosition,t="pos:"+e;d.selectedPosition&&C(a),d.selectedPosition===e?d.selectedPosition=null:(w(),b(t),d.selectedPosition=e),d.playerStatsFiltered=x(d.playerStats,d.searchText)};var b=function(e){d.searchText=d.searchText+e},C=function(e){d.searchText=d.searchText.replace(", "+e,""),d.searchText=d.searchText.replace(e+", ",""),d.searchText=d.searchText.replace(e,"")},w=function(){d.searchText=d.searchText?d.searchText+", ":""},P=function(e){var a=[],t=e.split(",");return angular.forEach(t,function(e){var t=e.split(":");if(0!==t.length&&t[1]){var s,o=t[0].replace(/(^\s+|\s+$)/g,""),n=t[1].toLowerCase();switch(o.toLowerCase()){case"rank":s="ranking";break;case"team":s=l.is("xs, sm")?"teamCode":"teamNameShort";break;case"player":s="player";break;case"pos":case"position":s="position";break;case"line":s="line";break;case"sub":s="sub"}a.push({key:s,value:n})}else a.push({key:"TEXTONLY",value:t})}),a},x=function(e,a){if(!a)return e;var t=P(a),s=[];return angular.forEach(e,function(e){var a=[];angular.forEach(t,function(t){if("TEXTONLY"===t.key)-1!==JSON.stringify(e).toLowerCase().indexOf(t.value)&&a.push(e);else{var s=e[t.key];s&&("string"!=typeof s&&(s=JSON.stringify(s)),-1!==s.toLowerCase().indexOf(t.value)&&a.push(e))}}),a.length===t.length&&s.push(e)}),s},G=function(e,a,t,s){v(e),g(e,a,t,s)},F=function(){e.$on(c.events().seasonSet,function(){var e=n.seasons.get();d.seasonId=e.seasonId,G(d.seasonId,d.seasonTypeId,d.playerType,!1)}),e.$on(c.events().seasonTypeSet,function(){var e=n.seasonTypes.get();d.seasonTypeId=e.seasonTypeId,G(d.seasonId,d.seasonTypeId,d.playerType,!1)}),e.$watch(function(){return a.params.playerType},function(e){d.playerType=e}),e.$watch(function(){return d.dtInstance},function(e,a){e!==a&&(d.dtInstance=e)})};d.$onInit=function(){d.dataLoaded=!1,d.positions=["F","D","G"],d.subs=["With","Without"],d.lines=["1","2","3"];var s=n.seasons.get();d.seasonId=s.seasonId;var o=n.seasonTypes.get();d.seasonTypeId=o.seasonTypeId,d.playerType=a.params.playerType,e.filterBySub("Without"),G(d.seasonId,d.seasonTypeId,d.playerType,!0),T(),t(function(){F(),h()},100)}}),angular.module("lo30NgApp").controller("statsPlayersController",function(e,a,t,s,o,n,r,l,i,c,p,m,u,y){var d=(c._,c.sjv,this),f=function(e){l.teams.listForSeasonId(e).then(function(e){d.teams=S(e)})["finally"](function(){})},S=function(e){var a=e.map(function(e,a){return e.rank=a+1,e.teamNameToDisplay=i.is("xs, sm")?e.teamCode:i.is("md")?e.teamNameShort:e.teamNameShort,e});return a},T=function(a,t,s,o){f(a),e.dtSkatersStats.ajax.url("../api/playerstatteams/seasons/"+d.seasonId+"/seasonTypes/"+d.seasonTypeId+"?key=1").load()};a.removeSearch=function(){a.searchText=null,e.dtSkatersStats.search("").draw()},a.performSearch=function(){var t=a.searchText?a.searchText:"";e.dtSkatersStats.search(t).draw()};var h=function(a,t){e.dtSkatersStats.columns(a).search(t).draw()},g=function(a){e.dtSkatersStats.columns(a).search("").draw()},N=function(e,a,t){return t&&g(e),a===t?t=null:(t=a,h(e,a)),t};a.filterByTeam=function(e){var a,t=10;a=i.is("xs, sm")?e.teamCode:i.is("md")?e.teamNameShort:e.teamNameShort,d.selectedTeam=N(t,a,d.selectedTeam)};var v=function(e){var a;return a="With"===e?"Y":"Without"===e?"N":"Y"===e?"With":"N"===e?"Without":null};a.filterBySub=function(e){var a=13,t=v(e),s=v(d.selectedSub);s=N(a,t,s),d.selectedSub=v(s)},a.filterByLine=function(e){var a=12;d.selectedLine=N(a,e,d.selectedLine)},a.filterByPosition=function(e){var a=11;d.selectedPosition=N(a,e,d.selectedPosition)};var I=function(){a.$on(p.events().seasonSet,function(){var e=r.seasons.get();d.seasonId=e.seasonId,T(d.seasonId,d.seasonTypeId,d.playerType,!1)}),a.$on(p.events().seasonTypeSet,function(){var e=r.seasonTypes.get();d.seasonTypeId=e.seasonTypeId,T(d.seasonId,d.seasonTypeId,d.playerType,!1)}),a.$watch(function(){return t.params.playerType},function(e){d.playerType=e}),a.$watch("searchText",function(e,t){e!==t&&a.performSearch(e)})};d.$onInit=function(){d.dataLoaded=!1,d.positions=["F","D","G"],d.subs=["With","Without"],d.lines=["1","2","3"];var e=r.seasons.get();d.seasonId=e.seasonId;var o=r.seasonTypes.get();d.seasonTypeId=o.seasonTypeId,d.playerType=t.params.playerType,a.filterBySub("Without"),T(d.seasonId,d.seasonTypeId,d.playerType,!0),s(function(){I()},100)}}),angular.module("lo30NgApp").component("contentComponent",{bindings:{},templateUrl:"js/components/content/content.html",controller:function(e,a,t,s,o){var n=this;n.pageTitle=s.current.data.pageTitle}}),angular.module("lo30NgApp").component("navigationComponent",{bindings:{},templateUrl:"js/components/navigation/navigation.html",controller:function(e,a,t){var s=this;s.activePage="notset",s.setActive=function(e){s.activePage=e},s.isActive=function(e){return s.activePage===e},s.season=a.seasons.get(),s.seasonType=a.seasonTypes.get(),e.$on(t.events().seasonSet,function(){s.season=a.seasons.get()}),e.$on(t.events().seasonTypeSet,function(){s.seasonType=a.seasonTypes.get()})}}),angular.module("lo30NgApp").component("topnavbarComponent",{bindings:{pageTitle:"<"},templateUrl:"js/components/topnavbar/topnavbar.html",controller:function(e,a,t,s){var o=this;o.$onInit=function(){o.pageTitle2=s.current.data.pageTitle},o.$onInit=function(){o.pageTitle2=s.current.data.pageTitle}}}),angular.module("lo30NgApp").controller("lo30PageHeaderController",["$log","$scope","$state","criteriaService","broadcastService",function(e,a,t,s,o){var n=this;a.toggleSeasonCriteriaPanel=function(){a.seasonCriteriaPanelOpen=!a.seasonCriteriaPanelOpen},a.toggleSeasonTypeCriteriaPanel=function(){a.seasonTypeCriteriaPanelOpen=!a.seasonTypeCriteriaPanelOpen};var r=function(){a.$watch(function(){return t.params.seasonId},function(e){sjv.isNotEmpty(e)&&s.seasons.setById(t.params.seasonId)}),a.$watch(function(){return t.params.seasonTypeId},function(e){sjv.isNotEmpty(e)&&s.seasonTypes.setById(t.params.seasonTypeId)}),a.$on(o.events().seasonSet,function(){a.season=s.seasons.get()}),a.$on(o.events().seasonTypeSet,function(){a.seasonType=s.seasonTypes.get()})};n.$onInit=function(){a.seasonCriteriaPanelOpen=!1,a.seasonTypeCriteriaPanelOpen=!1,a.pageTitle=t.current.data.pageTitle,a.season=s.seasons.get(),a.seasonType=s.seasonTypes.get(),r()}}]),angular.module("lo30NgApp").directive("lo30PageHeader",[function(){return{restrict:"E",templateUrl:"js/directives/pageHeader/pageHeader.html",scope:{},controller:"lo30PageHeaderController",link:function(e,a,t,s){}}}]),angular.module("lo30NgApp").controller("lo30SeasonSelectorController",["$log","$scope","$state","criteriaService",function(e,a,t,s){a.changeSeason=function(e){s.seasons.setById(e),a.decades=s.decades.get(),t.params.seasonId=e,t.go(t.current.name,t.params,{location:"replace",inherit:!1,notify:!1})},a.activate=function(){a.decades=s.decades.get()},a.activate()}]),angular.module("lo30NgApp").directive("lo30SeasonSelector",[function(){return{restrict:"E",templateUrl:"js/directives/seasonSelector/seasonSelector.html",scope:{},controller:"lo30SeasonSelectorController",link:function(e,a,t,s){}}}]),angular.module("lo30NgApp").controller("lo30SeasonTypeSelectorController",["$log","$scope","$state","criteriaService",function(e,a,t,s){
a.changeSeasonType=function(){s.seasonTypes.setById(a.selectedSeasonTypeId),t.params.seasonTypeId=a.selectedSeasonTypeId,t.go(t.current.name,t.params,{location:"replace",inherit:!1,notify:!1})},a.activate=function(){var e=s.seasonTypes.get();a.selectedSeasonTypeId=e.seasonTypeId},a.activate()}]),angular.module("lo30NgApp").directive("lo30SeasonTypeSelector",[function(){return{restrict:"E",templateUrl:"js/directives/seasonTypeSelector/seasonTypeSelector.html",scope:{},controller:"lo30SeasonTypeSelectorController",link:function(e,a,t,s){}}}]),lo30NgApp.directive("lo30CriteriaSelector",[function(){return{restrict:"E",templateUrl:"/views/directives/criteriaSelector.html",scope:{},controller:"lo30CriteriaSelectorController",link:function(e,a,t,s){}}}]),lo30NgApp.controller("lo30CriteriaSelectorController",["$log","$scope","broadcastService","externalLibService","apiService","criteriaService",function(e,a,t,s,o,n){var r=(s._,s.sjv);a.initializeScopeVariables=function(){a.local={seasons:[],games:[],seasonTypes:[]}},a.setWatches=function(){a.$watch("local.selectedSeason",function(e,t){r.isNotEmpty(e)&&r.isNotEmpty(t)&&e!==t&&n.season.set(a.local.selectedSeason)}),a.$watch("local.selectedSeasonType",function(e,t){r.isNotEmpty(e)&&r.isNotEmpty(t)&&e!==t&&n.seasonType.set(a.local.selectedSeasonType)}),a.$watch("local.selectedGame",function(e,t){r.isNotEmpty(e)&&r.isNotEmpty(t)&&e!==t&&n.game.set(a.local.selectedGame)})},a.activate=function(){a.initializeScopeVariables(),a.setWatches(),a.local.seasons=n.season.data(),a.local.selectedSeason=n.season.get(),a.local.seasonTypes=n.seasonType.data(),a.local.selectedSeasonType=n.seasonType.get(),a.local.games=n.game.data(),a.local.selectedGame=n.game.get()},a.activate()}]),lo30NgApp.directive("lo30DatatablesFilterRowHider",[function(){return{restrict:"E",templateUrl:"/views/directives/datatablesFilterRowHider.html",scope:{},link:function(e,a,t,s){{var o=a.parents("div");o.find("datatables-filter-row")}}}}]),lo30NgApp.directive("lo30FilterBy",[function(){return{restrict:"E",templateUrl:"/views/directives/filterBy.html",scope:{gameId:"="},controller:"lo30FilterByController",link:function(e,a,t,s){}}}]),lo30NgApp.controller("lo30FilterByController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,s,o){t._;a.initializeScopeVariables=function(){a={teams:[],fetchTeamsCompleted:!1}},a.fetchTeams=function(e){a.local.fetchTeamsCompleted=!1,a.local.teams=[],s.teams.listForSeasonId(e).then(function(e){a.local.teams=e,angular.forEach(e,function(e,a){e.teamNameToDisplay=o.is("xs, sm")?e.teamCode:o.is("md")?e.teamNameShort:e.teamNameShort})})["finally"](function(){a.local.fetchScoreSheetEntryGoalsCompleted=!0})},a.activate=function(){a.initializeScopeVariables(),a.fetchTeams(a.seasonId)},a.activate()}]),lo30NgApp.directive("lo30Footable",[function(e){return{link:{post:function(a,t){if(!a.$last)return!1;var s=t.parents("table");a.$evalAsync(function(){s.hasClass("footable-loaded")||s.footable(),s.data("__FooTable__").draw(),e(t.contents())(a)})}},pre:function(a,t){e(t.contents())(a)}}}]),lo30NgApp.directive("lo30FootableFilterInput",[function(){return{restrict:"E",template:'<input id="filter" type="text" class="input-datatables-filter" />',scope:{},link:function(a,t,s,o){t.parents("table");e.preventDefault();var n=$("table").data("footable-filter");alert('about to filter table by "tech"'),n.filter("tech"),confirm("clear filter now?")&&n.clearFilter()}}}]),lo30NgApp.directive("lo30FullScroll",[function(){return{restrict:"A",link:function(e,a){$timeout(function(){a.slimscroll({height:"100%",railOpacity:.9})})}}}]),lo30NgApp.directive("lo30GameScoreByPeriodDetail",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetail.html",scope:{gameId:"="},controller:"lo30GameScoreByPeriodDetailController",link:function(e,a,t,s){}}}]),lo30NgApp.controller("lo30GameScoreByPeriodDetailController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,s,o){t._;a.initializeScopeVariables=function(){a.local={scoreSheetEntryGoals:[],scoreSheetEntryScoring1st:[],scoreSheetEntryScoring2nd:[],scoreSheetEntryScoring3rd:[],scoreSheetEntryScoringOT:[],scoreSheetEntryPenalties:[],scoreSheetEntryPenalties1st:[],scoreSheetEntryPenalties2nd:[],scoreSheetEntryPenalties3rd:[],scoreSheetEntryPenaltiesOT:[],goalieStatGames:[],goalieStatGameWinner:{},goalieStatGameLoser:{},fetchScoreSheetEntryPenaltiesCompleted:!1,fetchScoreSheetEntryGoalsCompleted:!1,fetchGoalieStatGamesCompleted:!1}},a.fetchScoreSheetEntryGoals=function(e){a.local.fetchScoreSheetEntryGoalsCompleted=!1,a.local.scoreSheetEntriesGoals=[],s.scoreSheetEntryProcessedGoals.listForGameId(e).then(function(e){a.local.scoreSheetEntriesGoals=e,angular.forEach(e,function(e,t){e.goalPlayerNameToDisplay=e.goalPlayerFirstName+" "+e.goalPlayerLastName,e.goalPlayerLastNameSuffix&&(e.goalPlayerNameToDisplay=e.goalPlayerNameToDisplay+" "+e.goalPlayerLastNameSuffix),e.assist1PlayerLastName&&(e.assist1PlayerNameToDisplay=e.assist1PlayerFirstName+" "+e.assist1PlayerLastName,e.assist1PlayerLastNameSuffix&&(e.assist1PlayerNameToDisplay=e.assist1PlayerNameToDisplay+" "+e.assist1PlayerLastNameSuffix)),e.assist2PlayerLastName&&(e.assist2PlayerNameToDisplay=e.assist2PlayerFirstName+" "+e.assist2PlayerLastName,e.assist2PlayerLastNameSuffix&&(e.assist2PlayerNameToDisplay=e.assist2PlayerNameToDisplay+" "+e.assist2PlayerLastNameSuffix)),e.assist3PlayerLastName&&(e.assist3PlayerNameToDisplay=e.assist3PlayerFirstName+" "+e.assist3PlayerLastName,e.assist3PlayerLastNameSuffix&&(e.assist3PlayerLastNameSuffix=e.assist3PlayerLastNameSuffix+" "+e.assist3PlayerLastNameSuffix)),e.teamNameToDisplay=o.is("xs, sm")?e.teamCode:o.is("md")?e.teamNameShort:e.teamNameShort,1===e.period?a.local.scoreSheetEntryScoring1st.push(e):2===e.period?a.local.scoreSheetEntryScoring2nd.push(e):3===e.period?a.local.scoreSheetEntryScoring3rd.push(e):a.local.scoreSheetEntryScoringOT.push(e)})})["finally"](function(){a.local.fetchScoreSheetEntryGoalsCompleted=!0})},a.fetchScoreSheetEntryPenalties=function(e){a.local.fetchScoreSheetEntryPenaltiesCompleted=!1,a.local.scoreSheetEntryPenalties=[],s.scoreSheetEntryProcessedPenalties.listForGameId(e).then(function(e){a.local.scoreSheetEntryPenalties=e,angular.forEach(e,function(e,t){e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerLastNameSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerLastNameSuffix),e.teamNameToDisplay=o.is("xs, sm")?e.teamCode:o.is("md")?e.teamNameShort:e.teamNameShort,1===e.period?a.local.scoreSheetEntryPenalties1st.push(e):2===e.period?a.local.scoreSheetEntryPenalties2nd.push(e):3===e.period?a.local.scoreSheetEntryPenalties3rd.push(e):a.local.scoreSheetEntryPenaltiesOT.push(e)})})["finally"](function(){a.local.fetchScoreSheetEntryPenaltiesCompleted=!0})},a.fetchGoalieStatGames=function(e){a.local.fetchGoalieStatGamesCompleted=!1,a.local.goalieStatGames=[],s.goalieStatGames.listForGameId(e).then(function(e){a.local.goalieStatGames=e,angular.forEach(e,function(e,t){e.playerNameToDisplay=e.playerFirstName+" "+e.playerLastName,e.playerLastNameSuffix&&(e.playerNameToDisplay=e.playerNameToDisplay+" "+e.playerLastNameSuffix),e.teamNameToDisplay=o.is("xs, sm")?e.teamCode:o.is("md")?e.teamNameShort:e.teamNameShort,1===e.wins?a.local.goalieStatGameWinner=e:a.local.goalieStatGameLoser=e})})["finally"](function(){a.local.fetchGoalieStatGamesCompleted=!0})},a.activate=function(){a.initializeScopeVariables(),a.fetchScoreSheetEntryGoals(a.gameId),a.fetchScoreSheetEntryPenalties(a.gameId),a.fetchGoalieStatGames(a.gameId)},a.activate()}]),lo30NgApp.directive("lo30GameScoreByPeriodDetailGoalies",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetailGoalies.html",scope:{goalieStatGameWinner:"=",goalieStatGameLoser:"=",goalieStatGames:"="},link:function(e,a,t,s){}}}]),lo30NgApp.directive("lo30GameScoreByPeriodDetailScoring",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetailScoring.html",scope:{scoreSheetEntryGoals:"="},link:function(e,a,t,s){}}}]),lo30NgApp.directive("lo30GameScoreByPeriodDetailPenalties",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodDetailPenalties.html",scope:{scoreSheetEntryPenalties:"="},link:function(e,a,t,s){}}}]),lo30NgApp.directive("lo30GameScoreByPeriodSummary",[function(){return{restrict:"E",templateUrl:"/views/directives/gameScoreByPeriodSummary.html",scope:{gameId:"="},controller:"lo30GameScoreByPeriodSummaryController",link:function(e,a,t,s){}}}]),lo30NgApp.controller("lo30GameScoreByPeriodSummaryController",["$log","$scope","externalLibService","apiService","screenSize",function(e,a,t,s,o){var n=t._;a.initializeScopeVariables=function(){a.local={game:{},fetchGameCompleted:!1}},a.fetchGame=function(e){a.local.fetchGameCompleted=!1,a.local.game={},s.games.getForGameId(e).then(function(e){a.local.game=e,a.buildGameToDisplay()})["finally"](function(){a.local.fetchPlayerStatGamesCompleted=!0})},a.buildGameToDisplay=function(){a.local.gameToDisplay=n.clone(a.local.game),o.is("xs, sm")?(a.local.gameToDisplay.teamNameAwayToDisplay=a.local.game.teamCodeAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.local.game.teamCodeHome):o.is("md")?(a.local.gameToDisplay.teamNameAwayToDisplay=a.local.game.teamNameShortAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.local.game.teamNameShortHome):(a.local.gameToDisplay.teamNameAwayToDisplay=a.local.game.teamNameLongAway,a.local.gameToDisplay.teamNameHomeToDisplay=a.local.game.teamNameLongHome)},a.activate=function(){a.initializeScopeVariables(),a.fetchGame(a.gameId)},a.activate()}]),lo30NgApp.directive("lo30PageInit",[function(e){return{restrict:"E",scope:{},link:function(a,t,s){a.$watch("$viewContentLoaded",function(){$(".eeh-navigation-sidebar").addClass("sidebar-text-collapsed")}),e.sidebarIsCollapsed}}}]),lo30NgApp.directive("lo30SideNavigation",["$timeout",function(e){return{restrict:"A",link:function(a,t){e(function(){t.metisMenu()})}}}]),lo30NgApp.directive("lo30SlimScroll",[function(){return{restrict:"A",scope:{boxHeight:"@"},link:function(e,a){$timeout(function(){a.slimscroll({height:e.boxHeight,railOpacity:.9})})}}}]);